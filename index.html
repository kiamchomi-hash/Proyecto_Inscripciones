<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Oferta Académica Universidad Siglo 21 - CAU Villa Lugano</title>
    <meta name="description" content="Oferta académica Universidad Siglo 21 en Villa Lugano. Ideal para Zona Sur y Oeste: Celina, Madero, Tapiales, Soldati, Mataderos, Riachuelo, Budge.">
    <!-- Seguridad: Forzar HTTPS (Excepto en desarrollo local) -->
    <script>
        const isLocal = ['localhost', '127.0.0.1', '::1'].includes(location.hostname) || location.hostname.startsWith('192.168.');
        if (location.protocol === 'http:' && !isLocal) {
            location.replace(`https://${location.host}${location.pathname}${location.search}`);
        }
    </script>
    <!-- Incluir Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Fuentes: Crimson Pro (títulos, académica) y Atkinson Hyperlegible (cuerpo, legible) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Atkinson+Hyperlegible:wght@400;700&family=Crimson+Pro:wght@700;900&family=Inter:wght@100..900&display=swap" rel="stylesheet">
    <style>
        .main-navbar {
            background-color: #051a1a;
            position: sticky;
            top: 0;
            z-index: 2000;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
            border-bottom: 2px solid var(--color-highlight);
            transition: transform 0.3s ease;
        }

        .main-navbar.navbar-hidden {
            transform: translateY(-100%);
        }

        .navbar-container {
            width: 100%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 1rem;
            overflow: hidden;
        }


        .navbar-menu {
            display: flex;
            align-items: stretch;
            flex-grow: 1;
            justify-content: center;
            min-width: 0;
        }

        @media (min-width: 1025px) and (max-width: 1350px) {
            .navbar-menu {
                gap: 0;
            }
            .navbar-menu .navbar-link {
                font-size: clamp(0.7rem, 0.9vw, 0.85rem);
                padding: 0.8rem clamp(0.3rem, 0.5vw, 0.7rem);
                letter-spacing: 0.02em;
            }
            .navbar-menu .navbar-link.flag-link span {
                font-size: clamp(0.7rem, 0.9vw, 0.85rem) !important;
            }
            .navbar-menu .navbar-link.flag-link span:last-child {
                font-size: clamp(0.55rem, 0.7vw, 0.65rem) !important;
            }
        }


        /* Bandera Argentina - fondo del link Identidad Argentina */
        .flag-link {
            position: relative;
            overflow: hidden;
            z-index: 1;
            perspective: 400px;
            white-space: normal;
        }

        .flag-link .flag-bg {
            position: absolute;
            inset: 0;
            transform: rotateY(-12deg) rotateX(4deg);
            transform-origin: left center;
            overflow: hidden;
            opacity: 0.18;
            z-index: -1;
            transition: opacity 0.4s ease, transform 0.5s ease;
            box-shadow: inset -8px 0 18px rgba(0,0,0,0.25), inset 4px 0 10px rgba(255,255,255,0.08);
        }



        .flag-link .flag-band {
            position: absolute;
            left: 0;
            width: 100%;
        }

        .flag-link .flag-band-top {
            top: 0;
            height: 33.33%;
            background: linear-gradient(100deg, #74ACDF 0%, #8BC4F0 40%, #74ACDF 70%, #6BA0D0 100%);
        }

        .flag-link .flag-band-mid {
            top: 33.33%;
            height: 33.34%;
            background: linear-gradient(100deg, #fff 0%, #f5f5f5 30%, #fff 55%, #f0f0f0 80%, #fff 100%);
        }

        .flag-link .flag-band-bot {
            top: 66.67%;
            height: 33.33%;
            background: linear-gradient(100deg, #74ACDF 0%, #8BC4F0 40%, #74ACDF 70%, #6BA0D0 100%);
        }

        .flag-link .flag-sun {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 22px;
            height: 22px;
            z-index: 2;
        }

        .flag-link .flag-sun::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 12px;
            height: 12px;
            background: radial-gradient(circle, #F6B40E 35%, #FCDF73 65%, transparent 66%);
            border-radius: 50%;
            transform: translate(-50%, -50%);
        }

        .flag-link .flag-sun::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 22px;
            height: 22px;
            background: conic-gradient(
                from 0deg,
                transparent 0deg, #F6B40E 3deg, transparent 6deg,
                transparent 22.5deg, #F6B40E 25.5deg, transparent 28.5deg,
                transparent 45deg, #F6B40E 48deg, transparent 51deg,
                transparent 67.5deg, #F6B40E 70.5deg, transparent 73.5deg,
                transparent 90deg, #F6B40E 93deg, transparent 96deg,
                transparent 112.5deg, #F6B40E 115.5deg, transparent 118.5deg,
                transparent 135deg, #F6B40E 138deg, transparent 141deg,
                transparent 157.5deg, #F6B40E 160.5deg, transparent 163.5deg,
                transparent 180deg, #F6B40E 183deg, transparent 186deg,
                transparent 202.5deg, #F6B40E 205.5deg, transparent 208.5deg,
                transparent 225deg, #F6B40E 228deg, transparent 231deg,
                transparent 247.5deg, #F6B40E 250.5deg, transparent 253.5deg,
                transparent 270deg, #F6B40E 273deg, transparent 276deg,
                transparent 292.5deg, #F6B40E 295.5deg, transparent 298.5deg,
                transparent 315deg, #F6B40E 318deg, transparent 321deg,
                transparent 337.5deg, #F6B40E 340.5deg, transparent 343.5deg
            );
            border-radius: 50%;
            transform: translate(-50%, -50%);
        }

        /* Pliegues de tela - ondulación estática */
        .flag-link .flag-bg::before {
            content: '';
            position: absolute;
            inset: 0;
            background:
                linear-gradient(95deg,
                    rgba(255,255,255,0.15) 0%,
                    transparent 18%,
                    rgba(255,255,255,0.1) 35%,
                    transparent 50%,
                    rgba(255,255,255,0.08) 68%,
                    transparent 82%,
                    rgba(255,255,255,0.05) 100%
                );
            z-index: 3;
        }

        .flag-link .flag-bg::after {
            content: '';
            position: absolute;
            inset: 0;
            background:
                linear-gradient(100deg,
                    rgba(0,0,0,0.1) 0%,
                    transparent 12%,
                    rgba(0,0,0,0.06) 28%,
                    transparent 42%,
                    rgba(0,0,0,0.08) 60%,
                    transparent 75%,
                    rgba(0,0,0,0.12) 100%
                );
            z-index: 4;
        }



.navbar-link {
            color: #e0f0ed;
            text-decoration: none;
            font-weight: 700;
            font-size: 0.85rem;
            padding: 1rem 1.25rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            white-space: nowrap;
        }

        .navbar-link:hover {
            background-color: var(--color-highlight);
            color: #013729;
        }

        .navbar-link.active {
            background-color: #6d2282;
            color: #fff;
        }

        .navbar-social-icon {
            width: clamp(22px, 2vw, 28px);
            height: clamp(22px, 2vw, 28px);
            min-width: 22px;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: transparent;
            border: none;
            color: #7ca19b;
            transition: color 0.2s ease, background-color 0.2s ease;
            flex-shrink: 0;
        }

        /* Botón de WhatsApp destacado en navbar (Full Height) */
        .navbar-social-icon.social-whatsapp {
            background-color: #25D366;
            color: #ffffff;
            
            /* Alto completo: 
               1. auto !important para romper el height del clamp base.
               2. align-self: stretch para estirarse en el flex padre.
               Nota: El padre (.navbar-social) también debe tener align-self: stretch.
            */
            height: auto !important; 
            align-self: stretch;
            
            /* Ancho idéntico a los demás iconos */
            width: 50px !important;
            
            border-radius: 0; 
            margin: 0;
        }

        .navbar-social-icon.social-whatsapp:hover {
            background-color: #20bd5a; 
            color: #ffffff;
        }

        /* Facebook Highlight */
        .navbar-social-icon.social-facebook {
            background-color: rgba(24, 119, 242, 0.1); /* Tinte azul tenue como base */
            color: #1877F2; /* Icono azul */
            height: auto !important; 
            align-self: stretch;
            width: 50px !important;
            border-radius: 0; 
            margin: 0;
            border-right: 1px solid rgba(0,0,0,0.1);
        }

        .navbar-social-icon.social-facebook:hover {
            background-color: #1877F2; /* Sólido al hacer hover */
            color: #ffffff; /* Icono blanco */
        }

        /* Instagram Highlight */
        .navbar-social-icon.social-instagram {
            background-color: rgba(230, 104, 60, 0.1); /* Tinte naranja/rojo tenue como base */
            color: #e6683c; /* Icono naranja */
            height: auto !important; 
            align-self: stretch;
            width: 50px !important;
            border-radius: 0; 
            margin: 0;
        }

        .navbar-social-icon.social-instagram:hover {
            background-color: #e6683c; /* Fallback for old browsers */
            background: radial-gradient(circle at 30% 107%, #fdf497 0%, #fdf497 5%, #fd5949 45%, #d6249f 60%, #285AEB 90%);
            color: #ffffff;
        }

        .flag-link .ribbon-new {
            position: absolute;
            top: 0;
            right: 0;
            width: 55px;
            height: 55px;
            overflow: hidden;
            z-index: 10;
            pointer-events: none;
        }

        .flag-link .ribbon-new span {
            display: block;
            position: absolute;
            top: 8px;
            right: -18px;
            width: 80px;
            padding: 2px 0;
            background: #e53e3e;
            color: #fff;
            font-size: 0.5rem;
            font-weight: 900;
            text-align: center;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            transform: rotate(45deg);
            box-shadow: 0 2px 6px rgba(0,0,0,0.35);
        }


        /* Mobile Adjustments */
        .mobile-menu-btn {
            display: none;
            color: white;
            padding: 0.75rem;
            cursor: pointer;
        }

        @media (max-width: 1024px) {
            .mobile-menu-btn {
                display: block;
            }

            .navbar-menu {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100vh;
                overflow-y: auto;
                background-color: #051a1a;
                flex-direction: column;
                justify-content: flex-start;
                gap: 0;
                z-index: 2100;
                display: flex;
                transform: translateX(-100%);
                visibility: hidden;
                transition: transform 0.35s cubic-bezier(0.4, 0, 0.2, 1),
                            visibility 0.35s;
            }

            .navbar-menu.active {
                transform: translateX(0);
                visibility: visible;
            }



        .navbar-link {
                width: 100%;
                padding: 1.25rem 2rem;
                min-height: 56px;
                border-bottom: 1px solid rgba(0, 199, 177, 0.5);
                display: flex;
                align-items: center;
                font-size: 1.1rem;
                font-weight: 800;
                justify-content: flex-start;
            }

            .navbar-link.flag-link {
                text-align: left !important;
                justify-content: flex-start !important;
                align-items: flex-start !important;
            }

            .navbar-container {
                justify-content: space-between;
                min-height: 70px;
            }

            .menu-close-btn {
                position: absolute;
                top: 0.75rem;
                right: 0.75rem;
                color: white;
                background: none;
                border: none;
                font-size: 2rem;
                cursor: pointer;
                padding: 0.75rem;
                line-height: 1;
            }

            .menu-header {
                display: flex;
                align-items: center;
                gap: 1rem;
                padding: 1.25rem 2rem;
                border-bottom: 1px solid rgba(0, 199, 177, 0.3);
                background: linear-gradient(to bottom, #082a2a, #051a1a);
            }

            .menu-header img {
                height: 2.5rem;
                width: 2.5rem;
                object-fit: contain;
                filter: brightness(0) invert(1);
            }

            .menu-header .menu-brand {
                display: flex;
                flex-direction: column;
            }

            .menu-footer {
                margin-top: auto;
                padding: 1.5rem 2rem;
                border-top: 1px solid rgba(0, 199, 177, 0.3);
                display: flex;
                flex-direction: column;
                gap: 1rem;
            }

            .menu-footer-links {
                display: flex;
                flex-direction: column;
                gap: 0.5rem;
            }

            .menu-footer-link {
                color: #7ca19b;
                font-size: 0.875rem;
                text-decoration: none;
                display: flex;
                align-items: center;
                gap: 0.5rem;
                transition: color 0.2s;
            }

            .menu-footer-link:hover {
                color: #00c7b1;
            }

            .menu-footer-social {
                display: flex;
                gap: 0.75rem;
                padding-top: 0.5rem;
            }

            .menu-footer-social a {
                color: #7ca19b;
                transition: color 0.2s;
            }

            .menu-footer-social a:hover {
                color: #00c7b1;
            }
        }

        @media (max-width: 320px) {
            .navbar-container {
                padding: 0 0.5rem;
            }

            .navbar-container img {
                width: 1.75rem !important;
                height: 1.75rem !important;
                margin-right: 0.5rem !important;
            }

            .navbar-container .font-black {
                font-size: 0.75rem !important;
            }
        }

        /* Brand color system — CAU Villa Lugano */
        :root {
            --color-deep-dark-bg: #013729;
            --color-card-bg: #1c2f31;
            --color-highlight: #00c7b1;
            --color-secondary-highlight: #48b3a4;
            --color-text-light: #7ca19b;
            --color-text-normal: white;
            --color-dark-bg: #003f34;
            --color-accent: #00ffe1;
            --color-secondary-1: #008c7d;
            --color-secondary-2: #009681;
            --color-secondary-3: #006c5b;
            --color-gold: #e69b05;
            --color-gold-light: #dab03a;
            --color-surface: #162f2e;
            --color-special: #7c207b;
        }

                body {
                    font-family: 'Inter', sans-serif;
                    background-color: var(--color-deep-dark-bg);
                    color: var(--color-text-normal);
                    overflow-x: hidden;
                    word-wrap: break-word;
                    overflow-wrap: break-word;
                    hyphens: auto;
                    line-height: 1.6;
                }
        
                /* Aplica la fuente legible a las píldoras de filtro */
                .filter-pill {
                    font-family: 'Atkinson Hyperlegible', sans-serif;
                }
        /* Degradado animado en capa fija para evitar repaint al hacer scroll */
        body::before {
            content: '';
            position: fixed;
            inset: 0;
            z-index: -1;
            background: linear-gradient(160deg, #011d15 0%, var(--color-deep-dark-bg) 30%, var(--color-secondary-3) 60%, var(--color-deep-dark-bg) 100%);
            background-size: 300% 300%;
            animation: gradientBackground 20s ease infinite;
        }

        @keyframes gradientBackground {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        @media (prefers-reduced-motion: reduce) {
            body::before {
                animation: none;
                background: var(--color-deep-dark-bg);
            }
        }

        .h1-elegant {
            text-shadow: 0 2px 8px rgba(0, 0, 0, 0.4);
            font-weight: 900;
            letter-spacing: -0.05em;
            text-transform: uppercase;
        }

        .career-name-list {
            background-color: var(--color-card-bg);
            color: var(--color-text-normal);
            transition: all 0.3s ease;
            border: 1px solid rgba(0, 199, 177, 0.1);
            border-radius: 0.5rem;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
            cursor: pointer;
            text-align: left;
            overflow: hidden;
        }

        .career-name-list:hover {
            transform: scale(1.02);
            border-color: rgba(0, 199, 177, 0.3);
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);
        }

        .career-name-list.active {
            background-color: var(--color-surface);
            border-color: var(--color-highlight);
            transform: translateY(-3px);
            box-shadow: 0 8px 24px rgba(0, 199, 177, 0.15), 0 4px 12px rgba(0, 0, 0, 0.3);
        }

        /* Highlight visual para cuando se viene desde "Lo más buscado" */
        .active-feature-highlight {
            animation: targetPulse 2s ease-out;
            border: 2px solid var(--color-highlight) !important;
            z-index: 10;
        }

        @keyframes targetPulse {
            0% {
                background-color: rgba(0, 199, 177, 0.4);
            }

            100% {
                background-color: var(--color-card-bg);
            }
        }

        .career-name-list-mode-list {
            padding: 1rem 1.25rem;
            display: flex;
            align-items: center;
            /* Beautifully balanced centering */
            gap: 1.25rem;
            transition: background 0.3s ease, border-color 0.3s ease, transform 0.3s ease;
            flex-wrap: nowrap;
            position: relative;
            /* Base for absolute prefix positioning */
        }

        .career-name-list-mode-list:hover {
            background: rgba(0, 199, 177, 0.04);
            border-color: rgba(0, 199, 177, 0.3);
            transform: translateX(4px);
        }

        .career-name-list-mode-list .career-name {
            flex: 1;
            font-size: 1.1rem;
            font-weight: 600;
            color: white;
            line-height: 1.4;
            min-width: 0;
        }

        .career-name-list-mode-list .detail-link {
            flex-shrink: 0;
            white-space: nowrap;
            display: inline-block;
        }

        /* Media query eliminada para evitar apilamiento vertical raro en resoluciones bajas */

        .career-list-container.mode-slideshow>li {
            border-left: none;
            text-align: center;
            padding: 1.5rem;
            min-height: 100px;
        }

        .career-list-container.mode-slideshow>li.career-name-list {
            border: 1px solid #333;
        }

        .career-list-container.mode-slideshow>li.career-name-list.active {
            border: 2px solid var(--color-highlight);
            border-bottom: 5px solid var(--color-highlight);
            transform: translateY(-5px);
            background-color: #162f2e;
        }

        .career-list-container.mode-slideshow .detail-link {
            display: none;
        }

        .career-list-container.mode-slideshow {
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        }


        .section-header-pill {
            background-color: var(--color-secondary-highlight);
            color: var(--color-dark-bg);
            font-weight: 800;
            padding: 12px 28px;
            border-radius: 9999px;
            margin-bottom: 2.5rem;
            display: inline-block;
            text-align: center;
            box-shadow: none;
            transition: transform 0.3s ease;
        }

        .section-header-pill:hover {
            transform: translateY(-3px);
            box-shadow: none;
        }

        .detail-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px dashed #7ca19b;
        }

        .detail-item:last-child {
            border-bottom: none;
        }

        /* Wrapper Sticky para Filtros y Búsqueda */
        .sticky-header-wrapper {
            position: sticky;
            top: var(--navbar-height, 50px);
            z-index: 999;

            /* Full-width breakout (compatible with sticky) */
            width: var(--full-width, 100vw);
            margin-left: calc(var(--full-width, 100vw) / -2 + 50%);
            margin-right: calc(var(--full-width, 100vw) / -2 + 50%);

            background-color: rgba(5, 26, 26, 0.97);
            backdrop-filter: blur(12px);
            border-bottom: 2px solid #00c7b1;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);

            margin-bottom: 1.25rem;
            padding-top: 0.75rem;
            padding-bottom: 0.75rem;

            transition: background 0.3s ease, box-shadow 0.3s ease;

            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }


        .oferta-hero-heading {
            text-align: center;
            padding: 0.75rem 1rem 0.5rem;
            background-color: #4a1259;
            width: var(--full-width, 100vw);
            margin-left: calc(var(--full-width, 100vw) / -2 + 50%);
            margin-right: calc(var(--full-width, 100vw) / -2 + 50%);
            margin-bottom: 0;
        }

        .oferta-hero-heading h2 {
            font-size: 1.35rem;
            font-weight: 900;
            color: #ffffff;
            text-transform: uppercase;
            letter-spacing: -0.02em;
            line-height: 1;
            margin-bottom: 0.2rem;
        }

        .oferta-hero-heading p {
            color: #d4b8e0;
            font-size: 0.8rem;
            font-weight: 500;
            line-height: 1.3;
            max-width: 480px;
            margin: 0 auto;
        }

        .search-form-wrapper {
            width: 100%;
            padding: 0 1rem;
        }

        .search-form-wrapper form {
            position: relative;
            max-width: 640px;
            margin: 0 auto;
        }

        .search-form-wrapper .search-icon-left {
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: #7ca19b;
            pointer-events: none;
            transition: color 0.3s ease;
            z-index: 2;
            width: 18px;
            height: 18px;
        }

        .search-form-wrapper input#search-input {
            width: 100%;
            padding: 10px 14px 10px 42px;
            border-radius: 10px;
            font-size: 0.9rem;
            font-weight: 600;
            background-color: rgba(28, 47, 49, 0.7);
            color: var(--color-text-normal);
            border: 2px solid rgba(0, 199, 177, 0.25);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.25), inset 0 1px 0 rgba(255,255,255,0.03);
            transition: border-color 0.3s ease, box-shadow 0.3s ease, background-color 0.3s ease;
        }

        .search-form-wrapper input#search-input::placeholder {
            color: #8ab5ad;
            font-weight: 500;
        }

        .search-form-wrapper input#search-input:focus-visible {
            outline: none;
            border-color: #00c7b1;
            box-shadow: 0 0 0 3px rgba(0, 199, 177, 0.15), 0 4px 20px rgba(0, 0, 0, 0.3);
            background-color: rgba(28, 47, 49, 0.9);
        }

        .search-form-wrapper input#search-input:focus-visible ~ .search-icon-left,
        .search-form-wrapper form:focus-within .search-icon-left {
            color: #00c7b1;
        }

        .filter-container {
            display: flex; /* Revert to flex for default large screen behavior */
            flex-wrap: wrap; /* Allow wrapping */
            gap: 10px;
            justify-content: center;
            width: 100%;
            margin-bottom: 0;
            padding: 0 0.5rem;
            box-sizing: border-box; /* Keep this for consistent width calculation */
        }



        .sticky-search-container {
            padding-left: calc(50vw - 50% + 1rem);
            padding-right: calc(50vw - 50% + 1rem);
            width: 100%;
        }

        @media (min-width: 640px) {
            .oferta-hero-heading h2 {
                font-size: 1.5rem;
            }
            .oferta-hero-heading p {
                font-size: 0.85rem;
            }
        }

        @media (min-width: 1024px) {
            .oferta-hero-heading h2 {
                font-size: 1.65rem;
            }
        }

        .filter-pill {
            background-color: rgba(200, 200, 210, 0.12);
            color: #c5c8ce;
            border: 1px solid rgba(200, 200, 210, 0.25);
            padding: 10px 18px;
            min-height: 44px;
            border-radius: 9999px;
            font-weight: 700;
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 0.04em;
                transition: all 0.3s ease;
                cursor: pointer;
                                                                                                                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
                                                                                                                white-space: nowrap;
                                                                                                            }        .filter-pill:hover {
            background-color: var(--color-highlight);
            color: var(--color-deep-dark-bg);

            box-shadow: 0 4px 16px rgba(0, 199, 177, 0.3);
        }

        .filter-pill:active {

        }

        .filter-pill.filter-pill-all {
            background-color: rgba(255, 255, 255, 0.08);
            color: #9a9da3;
            border: 1px solid rgba(255, 255, 255, 0.15);
        }

        .filter-pill.filter-pill-all:hover {
            background-color: rgba(255, 255, 255, 0.85);
            color: #1a1a1a;
        }

        .filter-pill.filter-pill-all.active {
            background-color: rgba(255, 255, 255, 0.9) !important;
            color: #1a1a1a !important;
            border-color: rgba(255, 255, 255, 0.6);
            box-shadow: 0 2px 10px rgba(255, 255, 255, 0.15);
        }

        .filter-pill.featured {
            background-color: #b8922a;
            color: #fff;
            border: 1px solid #c9a03a;
            font-weight: 900;
            z-index: 2;
            box-shadow: 0 2px 10px rgba(184, 146, 42, 0.3);
        }

        .filter-pill.featured:hover {
            background-color: #c9a03a;
            color: #fff;

        }

        .filter-pill.active {
            background-color: rgba(255, 255, 255, 0.9) !important;
            color: #1a1a1a !important;
            border-color: rgba(255, 255, 255, 0.6);
            /* Mantenemos un poco de peso extra para destacar */
            font-weight: 800;
            box-shadow: 0 2px 10px rgba(255, 255, 255, 0.15);
        }

        /* Ajuste para que no rompa la línea en la grilla */


        /* Búsqueda por sección */
        .section-header-container {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.25rem;
            min-height: 48px;
        }

        .section-title-wrapper {
            display: flex;
            align-items: center;
            gap: 1rem;
            flex-shrink: 0;
        }

        .section-search-wrapper {
            display: none;
            flex-grow: 1;
            align-items: center;
            gap: 0.75rem;
            background: rgba(1, 35, 29, 0.95);
            border: 2px solid var(--color-highlight);
            border-radius: 12px;
            padding: 0.75rem 1.25rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }

        .section-search-input {
            background-color: transparent !important;
            border: none !important;
            border-bottom: 2px solid transparent !important;
            color: white !important;
            font-size: 1.5rem !important;
            font-weight: 800 !important;
            text-transform: uppercase;
            padding: 0.5rem 0 !important;
            width: 100%;
            outline: none !important;
            transition: border-color 0.2s ease;
        }

        .section-search-input::placeholder {
            color: rgba(255, 255, 255, 0.5) !important;
            font-weight: 700 !important;
        }

        .section-search-input:focus {
            border-bottom-color: var(--color-highlight) !important;
        }

        .section-search-wrapper.active {
            display: flex;
            animation: fadeInSearch 0.3s ease;
        }

        @keyframes fadeInSearch {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        .section-search-close {
            background: rgba(0, 199, 177, 0.2);
            border: 1px solid var(--color-highlight);
            border-radius: 50%;
            color: var(--color-highlight);
            font-size: 1.5rem;
            cursor: pointer;
            line-height: 1;
            padding: 0.25rem;
            width: 2.75rem;
            height: 2.75rem;
            min-width: 44px;
            min-height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.2s ease, color 0.2s ease, transform 0.2s ease;
        }

        .section-search-close:hover {
            background: var(--color-highlight);
            color: var(--color-deep-dark-bg);
            transform: scale(1.1);
        }

        .section-search-trigger {
            background-color: white;
            border: 2px solid white;
            color: var(--color-deep-dark-bg);
            padding: 8px;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.2s ease, color 0.2s ease, box-shadow 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            box-shadow: 0 2px 8px rgba(255, 255, 255, 0.3);
        }

        .section-search-trigger:hover {
            background-color: var(--color-highlight);
            border-color: var(--color-highlight);
            color: var(--color-deep-dark-bg);
            transform: scale(1.1);
            box-shadow: 0 4px 16px rgba(0, 199, 177, 0.6);
        }

        .section-search-trigger svg {
            width: 1.25rem;
            height: 1.25rem;
        }

        /* Responsive Typography and Layout */
        @media (max-width: 1024px) {
            .section-header-container {
                gap: 0.75rem;
            }
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 2.25rem !important;
            }

            h2 {
                font-size: 1.8rem !important;
            }
        }

        @media (max-width: 540px) {
            .container {
                padding-left: 0.75rem !important;
                padding-right: 0.75rem !important;
            }

            .section-header-container {
                flex-wrap: wrap;
                margin-bottom: 1rem;
            }

            .section-title-wrapper {
                width: 100%;
                justify-content: space-between;
                gap: 0.5rem;
            }

            .section-title-wrapper h2 {
                font-size: 1.5rem !important;
                flex: 1;
            }

            header .p-6 {
                padding: 1.5rem !important;
            }
        }

        @media (max-width: 400px) {
            h1 {
                font-size: 1.8rem !important;
                line-height: 1.1 !important;
            }

            h2 {
                font-size: 1.4rem !important;
            }

            .section-search-input {
                font-size: 1.1rem !important;
            }

            header .p-6 {
                padding: 1.25rem !important;
            }

            .filter-pill {
                padding: 6px 12px;
                font-size: 0.7rem;
            }
        }

        @media (max-width: 350px) {
            h1 {
                font-size: 1.5rem !important;
            }

            h2 {
                font-size: 1.25rem !important;
            }

            .career-name {
                font-size: 1rem !important;
            }

            .detail-link {
                font-size: 0.7rem !important;
                padding: 0.5rem !important;
            }

            .container {
                padding-left: 0.5rem !important;
                padding-right: 0.5rem !important;
            }
        }

        /* Carousel — all resolutions */
        #top-featured-container {
            overflow: hidden !important;
            position: relative;
            padding-bottom: 0.25rem !important;
            width: 100% !important;
            max-width: 100%;
            margin: 0 auto;
        }

        @media (min-width: 1025px) {
            #top-featured-container {
                max-width: 80%;
                margin-left: 12%;
                margin-right: 8%;
            }
        }

        #top-featured-container .carousel-track {
            display: flex;
            gap: var(--carousel-gap, 12px);
            width: max-content;
            transition: transform 0.45s ease;
        }

        #top-featured-container .carousel-track > * {
            flex: none; /* width set by JS */
        }

        /* Featured career card */
        .featured-career-card {
            position: relative;
            overflow: hidden;
            background: rgba(28, 47, 49, 0.9);
            border: 1px solid rgba(0, 199, 177, 0.3);
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.25);
            transition: border-color 0.2s ease-out, box-shadow 0.2s ease-out;
            height: 64px;
            box-sizing: border-box;
        }
        .featured-career-card .featured-bg {
            position: absolute;
            inset: 0;
            background-size: cover;
            background-position: center;
            opacity: 0;
            filter: brightness(1.3) saturate(1.1);
            transition: opacity 0.3s ease-out;
        }
        .featured-career-card:hover .featured-bg,
        .featured-career-card:active .featured-bg {
            opacity: 1;
        }
        .featured-career-card .featured-overlay {
            position: absolute;
            inset: 0;
            background: rgba(1, 26, 20, 0.65);
            opacity: 0;
            transition: opacity 0.3s ease-out;
        }
        .featured-career-card:hover .featured-overlay,
        .featured-career-card:active .featured-overlay {
            opacity: 1;
        }
        .featured-career-card .featured-text {
            position: relative;
            z-index: 1;
        }
        .featured-career-card:hover {
            border-color: rgba(0, 199, 177, 0.7);
            box-shadow: 0 2px 12px rgba(0, 199, 177, 0.15);
        }
        .featured-career-card:focus-visible {
            outline: 2px solid #00c7b1;
            outline-offset: 2px;
        }
        @media (prefers-reduced-motion: reduce) {
            .featured-career-card .featured-bg,
            .featured-career-card .featured-overlay {
                transition: none;
            }
        }

        @media (prefers-reduced-motion: reduce) {
            #top-featured-container .carousel-track {
                transition: none;
            }
        }

        /* Apply mobile design (4-column grid and small button styling) when buttons cannot fit on one line at desktop size */
        /* Apply mobile design (4-column grid and small button styling) when buttons cannot fit on one line at desktop size */
        @media (max-width: 1350px) {
            .filter-container {
                display: grid;
                grid-template-columns: repeat(4, 1fr); /* Enforce 4-column grid */
                gap: 10px;
                justify-items: center; /* Center grid items horizontally */
                padding: 0 0.5rem; /* Ensure consistent padding */
            }

            .filter-pill {
                width: 100%; /* In a grid, this makes it fill the cell */
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 0.55rem; /* Mobile font size */
                letter-spacing: -0.04em; /* Mobile letter spacing */
                padding: 4px 0px; /* Mobile padding */
                text-align: center;
                border-width: 1px;
                border-radius: 6px;
                white-space: nowrap; /* Prevent any line breaks within words for mobile */
                line-height: 1;
                height: 36px; /* Mobile height */
                hyphens: none;
                overflow: hidden;
                text-overflow: ellipsis; /* Ensure text overflow is handled */
            }


        }



        /* Carousel — mobile overrides */
        @media (max-width: 640px) {
            .sticky-header-wrapper {
                padding-top: 0.5rem;
                padding-bottom: 0.5rem;
                gap: 0.5rem;
                top: var(--navbar-height, 50px);
                transition: top 0.3s ease;
                z-index: 1001;
                /* Por encima del navbar para evitar que lo tape durante transiciones */
            }

            #top-featured-container .carousel-track {
                --carousel-gap: 8px;
            }

            /* Transform Filter Buttons into a 4x2 Grid (8 buttons total) */
            .filter-container {
                display: grid;
                grid-template-columns: repeat(4, 1fr);
                gap: 4px;
                padding: 0 0.5rem;
                margin-bottom: 0;
            }

            .filter-pill {
                width: 100% !important;
                display: flex !important;
                align-items: center !important;
                justify-content: center !important;
                font-size: 0.55rem !important;
                /* Further reduced to ensure "Especializaciones" fits */
                letter-spacing: -0.04em !important;
                /* Tighter spacing to reclaim width */
                padding: 4px 0px !important;
                text-align: center !important;
                border-width: 1px !important;
                border-radius: 6px !important;
                white-space: nowrap !important;
                /* Prevent any line breaks within words */
                line-height: 1 !important;
                height: 36px !important;

                hyphens: none !important;
                overflow: hidden !important;
            }









            .sticky-search-container {
                padding-left: 0.5rem !important;
                padding-right: 0.5rem !important;
            }

            #search-input {
                padding: 0.5rem 0.5rem 0.5rem 2.25rem !important;
                font-size: 0.8rem !important;
            }

            .search-form-wrapper .search-icon-left {
                left: 10px;
                width: 16px;
                height: 16px;
            }
        }

        /* Ultra small screens Fix (e.g. 250px-293px) */
        @media (max-width: 300px) {
            h1 {
                font-size: 1.1rem !important;
            }

            h2 {
                font-size: 1rem !important;
            }

            .section-header-container {
                gap: 0.25rem;
            }

            .filter-pill {
                padding: 4px 6px;
                font-size: 0.6rem;
            }

            .career-name-list-mode-list {
                padding: 0.6rem;
            }

            .detail-item {
                font-size: 0.7rem;
            }

            .section-search-input {
                font-size: 0.9rem !important;
            }

            .section-search-trigger svg {
                width: 1.1rem;
                height: 1.1rem;
            }

            #top-featured-container .carousel-track {
                --carousel-gap: 6px;
            }

            #top-featured-container .carousel-track button {
                padding: 0.5rem 0.4rem;
            }

            #top-featured-container .carousel-track span {
                font-size: 9px !important;
            }
        }

        /* Extreme Micro-Resolutions (100px - 200px) */
        @media (max-width: 250px) {
            .navbar-container .flex-col {
                display: none !important;
            }

            /* Hide brand text */
            .navbar-container img {
                width: 1.5rem !important;
                height: 1.5rem !important;
                margin-right: 0 !important;
            }

            .mobile-menu-btn {
                padding: 0.25rem;
            }

            .mobile-menu-btn svg {
                width: 1.5rem;
                height: 1.5rem;
            }

            .container {
                padding: 0.2rem !important;
            }

            header .p-4,
            header .p-6 {
                padding: 0.5rem !important;
            }

            h1 {
                font-size: 0.9rem !important;
            }

            h2 {
                font-size: 0.85rem !important;
            }

            .career-name {
                font-size: 0.8rem !important;
                font-weight: 700;
            }

            .detail-link {
                font-size: 0.6rem !important;
                padding: 0.3rem !important;
                border-width: 1px !important;
            }

            #top-featured-container .carousel-track {
                --carousel-gap: 4px;
            }

            .filter-pill {
                display: block;
                width: 100%;
                text-align: center;
                margin-bottom: 2px;
            }

            .navbar-mobile-header {
                padding: 1rem 0.5rem;
            }

            .navbar-mobile-header img {
                width: 2rem !important;
                height: 2rem !important;
            }

            .navbar-mobile-header h2 {
                font-size: 0.75rem !important;
            }

            .navbar-mobile-header p {
                display: none;
            }
        }

        @media (max-width: 150px) {
            .navbar-container {
                padding: 0 0.1rem !important;
            }

            .career-name-list-mode-list {
                gap: 0.5rem;
            }

            .section-title-wrapper h2 {
                font-size: 0.75rem !important;
            }

            .section-search-trigger {
                padding: 1px !important;
            }

            .section-search-input {
                font-size: 0.75rem !important;
            }

            .detail-item span:first-child {
                font-size: 0.65rem;
            }

            .detail-item span:last-child {
                font-size: 0.7rem;
                font-weight: 900;
            }
        }

        /* The 100px limit */
        @media (max-width: 100px) {
            img {
                display: none !important;
            }

            /* Hide all images to save every pixel */
            h1,
            h2,
            .career-name {
                font-size: 0.7rem !important;
            }

            .detail-link {
                font-size: 0.55rem !important;
            }

            .container {
                margin: 0 !important;
            }
        }

        /* Botones Flotantes Minimalistas */
        .floating-actions {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            display: flex;
            flex-direction: column;
            gap: 1rem;
            z-index: 1000;
        }

        .floating-btn {
            width: 3.5rem;
            height: 3.5rem;
            border-radius: 9999px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.25);
            border: 1px solid rgba(0, 199, 177, 0.3);
            text-decoration: none;
            outline: none;
            backdrop-filter: blur(8px);
        }

        .floating-btn:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 8px 24px rgba(0, 199, 177, 0.3);
        }

        .floating-btn:active {
            transform: scale(0.95);
        }

        .btn-scroll-top {
            background-color: var(--color-deep-dark-bg);
            color: var(--color-highlight);
            opacity: 0;
            visibility: hidden;
            transform: translateY(20px);
        }

        .btn-scroll-top.visible {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .btn-whatsapp {
            background-color: #25D366;
            color: white;
            border: none;
        }

        .btn-whatsapp:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 8px 25px rgba(37, 211, 102, 0.4);
        }

        @media (max-width: 640px) {
            .floating-actions {
                bottom: 1.5rem;
                right: 1.5rem;
                gap: 0.75rem;
            }

            .floating-btn {
                width: 3rem;
                height: 3rem;
            }
        }

        /* Estilos para resaltado de búsqueda */
        mark.search-highlight {
            background: linear-gradient(120deg, var(--color-highlight) 0%, var(--color-accent) 100%);
            color: var(--color-deep-dark-bg);
            padding: 1px 5px;
            border-radius: 3px;
            font-weight: 800;
            box-shadow: 0 1px 4px rgba(0, 255, 225, 0.2);
        }

        /* Skeleton loaders */
        .skeleton-card {
            background: linear-gradient(90deg, var(--color-card-bg) 25%, var(--color-surface) 50%, var(--color-card-bg) 75%);
            background-size: 200% 100%;
            animation: shimmer 1.5s infinite;
            border-radius: 0.5rem;
            height: 100px;
            margin-bottom: 1rem;
        }

        @keyframes shimmer {
            0% {
                background-position: 200% 0;
            }

            100% {
                background-position: -200% 0;
            }
        }

        /* Loading spinner en el input de búsqueda */
        .search-loading {
            position: relative;
        }

        .search-loading::after {
            content: '';
            position: absolute;
            right: 1rem;
            top: 50%;
            transform: translateY(-50%);
            width: 16px;
            height: 16px;
            border: 2px solid var(--color-highlight);
            border-top-color: transparent;
            border-radius: 50%;
            animation: spin 0.6s linear infinite;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        /* Favorites System Styles */
        .favorite-btn {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.08);
            cursor: pointer;
            color: var(--color-text-light);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 44px;
            height: 44px;
            border-radius: 0.5rem;
            padding: 0;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
        }

        .favorite-btn svg {
            width: 20px;
            height: 20px;
            fill: none;
            transition: all 0.3s ease;
        }

        .favorite-btn:hover {
            background-color: rgba(230, 155, 5, 0.1);
            border-color: rgba(230, 155, 5, 0.3);
            color: var(--color-gold);
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }

        .favorite-btn.is-favorite {
            color: var(--color-gold);
            background: rgba(230, 155, 5, 0.1);
            border-color: rgba(230, 155, 5, 0.3);
            filter: drop-shadow(0 0 6px rgba(230, 155, 5, 0.3));
            animation: fav-pop 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .favorite-btn.is-favorite svg {
            fill: currentColor;
        }

        @keyframes fav-pop {
            0% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.3);
            }

            100% {
                transform: scale(1);
            }
        }

        /* Footer social links */
        .footer-social-link {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            border-radius: 0.5rem;
            color: var(--color-text-light);
            background: rgba(255, 255, 255, 0.04);
            border: 1px solid rgba(255, 255, 255, 0.06);
            transition: all 0.3s ease;
        }

        .footer-social-link:hover {
            color: var(--color-accent);
            background: rgba(0, 255, 225, 0.08);
            border-color: rgba(0, 255, 225, 0.2);
            transform: scale(1.05);
        }

        /* Sidebar & Collapsible Panels */
        .sidebar-block {
            background: rgba(22, 47, 46, 0.5);
            backdrop-filter: blur(12px);
            will-change: backdrop-filter;
            border: 1px solid rgba(0, 199, 177, 0.1);
            border-radius: 0.75rem;
            margin-bottom: 1.5rem;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .sidebar-block:hover {
            border-color: rgba(0, 199, 177, 0.2);
        }

        .panel-header {
            padding: 1.25rem 1.5rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            cursor: pointer;
            user-select: none;
            background: rgba(28, 47, 49, 0.6);
            transition: background 0.2s ease;
        }

        .panel-header:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        .panel-title-wrapper {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .panel-chevron {
            transition: transform 0.3s ease;
            color: var(--color-text-light);
        }

        .collapsed .panel-chevron {
            transform: rotate(-90deg);
        }

        .panel-content {
            padding: 1.5rem;
            max-height: 2000px;
            opacity: 1;
            transition: max-height 0.5s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.5s cubic-bezier(0.4, 0, 0.2, 1), padding 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            overflow: hidden;
        }

        .scrollable-panel {
            max-height: 60vh;
            overflow-y: auto;
        }

        /* Scrollbar Personalizada para el panel de info */
        .scrollable-panel::-webkit-scrollbar {
            width: 6px;
        }

        .scrollable-panel::-webkit-scrollbar-track {
            background: rgba(1, 55, 41, 0.2);
            border-radius: 10px;
        }

        .scrollable-panel::-webkit-scrollbar-thumb {
            background: var(--color-highlight);
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 199, 177, 0.3);
        }

        .scrollable-panel::-webkit-scrollbar-thumb:hover {
            background: var(--color-secondary-highlight);
        }

        .collapsed .panel-content {
            max-height: 0 !important;
            padding-top: 0 !important;
            padding-bottom: 0 !important;
            opacity: 0 !important;
            pointer-events: none;
            overflow: hidden !important;
        }

        /* Clear Favorites Button Style */
        .btn-clear-favorites {
            background-color: rgba(220, 38, 38, 0.2);
            border: 1px solid rgba(239, 68, 68, 0.4);
            color: #f87171;
            padding: 0.5rem 0.85rem;
            min-height: 44px;
            border-radius: 9999px;
            font-size: 0.65rem;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            transition: background-color 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275), color 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275), border-color 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275), transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275), box-shadow 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            margin-left: 1rem;
            box-sizing: border-box;
        }

        .btn-clear-favorites:hover {
            background-color: #dc2626;
            color: white;
            border-color: #ef4444;
            transform: scale(1.05);
            box-shadow: 0 0 15px rgba(220, 38, 38, 0.4);
        }

        .btn-clear-favorites:active {
            transform: scale(0.95);
        }

        /* Adjustments for Favorites inside Sidebar */
        .favorites-section {
            display: none;
            /* Controlled by .has-favorites */
            border-radius: 1.5rem;
            background: rgba(28, 47, 49, 0.4);
            border: 1px solid rgba(0, 199, 177, 0.1);
            box-shadow: none;
            /* Redundant sticky removed since parent column is now sticky */
        }

        .favorites-section.has-favorites {
            display: block;
        }

        .favorites-grid {
            grid-template-columns: 1fr;
            gap: 0.75rem;
        }

        .favorites-grid .career-name-list {
            padding: 0.75rem 1rem;
            min-height: auto;
            flex-wrap: nowrap;
            gap: 0.5rem;
            background: rgba(255, 255, 255, 0.02) !important;
        }

        .favorites-grid .career-name {
            font-size: 0.95rem;
            min-width: 0;
        }

        .favorites-grid .favorite-btn {
            width: 32px;
            height: 32px;
        }

        .favorites-grid .detail-link {
            padding: 0.25rem 0.5rem !important;
            font-size: 0.75rem;
        }

        #sidebar-column {
            position: sticky;
            top: 3rem;
            height: fit-content;
            z-index: 10;
        }

        /* Comparison Tool Styles */
        .comparison-checkbox-wrapper {
            margin-right: 0.5rem;
            display: flex;
            align-items: center;
        }

        .comparison-checkbox {
            appearance: none;
            width: 1.25rem;
            height: 1.25rem;
            border: 2px solid var(--color-highlight);
            border-radius: 4px;
            cursor: pointer;
            position: relative;
            background: rgba(28, 47, 49, 0.8);
            transition: background-color 0.2s ease, border-color 0.2s ease;
            /* Ensure 44px touch target via transparent padding */
            padding: 0.75rem;
            box-sizing: content-box;
        }

        .comparison-checkbox:checked {
            background-color: var(--color-highlight);
        }

        .comparison-checkbox:checked::after {
            content: '✓';
            position: absolute;
            color: #013729;
            font-size: 0.9rem;
            font-weight: 900;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .comparison-bar {
            position: fixed;
            bottom: 5rem;
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            background: rgba(1, 55, 41, 0.95);
            backdrop-filter: blur(10px);
            will-change: transform, backdrop-filter;
            border: 2px solid var(--color-highlight);
            border-radius: 1rem;
            padding: 1rem 2rem;
            z-index: 1100;
            display: flex;
            align-items: center;
            gap: 2rem;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
            transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            max-width: 90vw;
        }

        @media (min-width: 1024px) {
            .comparison-bar {
                /* Centrado respecto a las 2 columnas de carreras (que ocupan 2/3 del grid) */
                left: 33.333%;
            }
        }

        /* Mejora visual para "no hay resultados" */
        .no-results-message {
            text-align: center;
            padding: 3rem 2rem;
            color: var(--color-text-secondary);
            font-size: 1.1rem;
        }

        .no-results-message svg {
            width: 64px;
            height: 64px;
            margin: 0 auto 1rem;
            opacity: 0.5;
        }

        .custom-scrollbar::-webkit-scrollbar {
            width: 8px;
        }

        .custom-scrollbar::-webkit-scrollbar-track {
            background: rgba(1, 26, 20, 0.5);
        }

        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: var(--color-highlight);
            border-radius: 4px;
        }

        .anim-scale-up {
            animation: scaleUp 0.3s ease-out forwards;
        }

        @keyframes scaleUp {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }

        /* Modal open/close animations */
        #career-modal .modal-backdrop {
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        #career-modal.modal-visible .modal-backdrop {
            opacity: 1;
        }
        #career-modal .modal-panel {
            opacity: 0;
            transform: scale(0.9);
            transition: opacity 0.3s ease, transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        #career-modal.modal-visible .modal-panel {
            opacity: 1;
            transform: scale(1);
        }
        #career-modal.modal-closing .modal-backdrop {
            opacity: 0;
        }
        #career-modal.modal-closing .modal-panel {
            opacity: 0;
            transform: scale(0.9);
        }
    </style>
</head>

<body class="min-h-screen">
    <nav class="main-navbar">
        <div class="navbar-container">
            <!-- Mobile Menu Button -->
            <button class="mobile-menu-btn" id="mobile-toggle"
                    aria-label="Abrir menú de navegación"
                    aria-expanded="false"
                    aria-controls="navbar-menu">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-9 w-9" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor">
                    <line x1="4" y1="7" x2="20" y2="7" stroke-width="2" stroke-linecap="round"/>
                        <line x1="4" y1="12" x2="20" y2="12" stroke-width="2" stroke-linecap="round"/>
                        <line x1="4" y1="17" x2="20" y2="17" stroke-width="2" stroke-linecap="round"/>
                </svg>
            </button>

            <!-- Mobile Branding (Visible only on mobile) -->
            <div class="flex lg:hidden flex-1 items-center overflow-hidden">
                <!-- Espaciador izquierdo para centrar el bloque de texto -->
                <div class="flex-1"></div>
                
                <div class="flex flex-col justify-center">
                    <h1 class="font-black text-white leading-none uppercase tracking-tighter" style="font-size: 1.25rem !important; line-height: 1 !important;">CAU - VILLA LUGANO
                    </h1>
                    <p class="text-xs font-black text-[#00c7b1] uppercase tracking-wider leading-none">SIGLO 21</p>
                </div>

                <!-- Contenedor del logo: lo ubica en el centro del espacio restante a la derecha -->
                <div class="flex-1 flex justify-center items-center">
                    <img src="imagenes/file-removebg-preview.png" alt="Logo del Centro de Aprendizaje Universitario Villa Lugano" class="h-10 w-10 object-contain"
                        style="filter: brightness(0) invert(1);" width="40" height="40">
                </div>
            </div>


            <!-- Links -->
            <div class="navbar-menu" id="navbar-menu" role="dialog" aria-label="Menú de navegación">
                <button class="lg:hidden menu-close-btn" id="menu-close" aria-label="Cerrar menú">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24"
                        stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>

                <!-- Menu header con branding -->
                <div class="menu-header lg:hidden">
                    <img src="imagenes/file-removebg-preview.png" alt="Logo CAU Villa Lugano - Siglo 21" loading="lazy" width="40" height="40">
                    <div class="menu-brand">
                        <span class="font-black text-white text-lg uppercase tracking-tighter leading-none">CAU - Villa Lugano</span>
                        <span class="text-xs font-bold text-[#00c7b1] uppercase tracking-wider">Siglo 21</span>
                    </div>
                </div>

                <a href="index.html" class="navbar-link">INICIO/CARRERAS</a>
                <a href="clases-apoyo.html" class="navbar-link">Clases de Apoyo</a>
                <a href="identidad-argentina.html" class="navbar-link flag-link" style="flex-direction:column;line-height:1.1;text-align:center;justify-content:center;">
                    <div class="flag-bg">
                        <div class="flag-band flag-band-top"></div>
                        <div class="flag-band flag-band-mid"></div>
                        <div class="flag-band flag-band-bot"></div>
                        <div class="flag-sun"></div>
                    </div>
                    <div class="ribbon-new"><span>Nuevo!</span></div>
                    <span style="display:block;">Cursos</span><span style="display:block;font-size:0.65rem;opacity:0.75;">Identidad Argentina</span>
                </a>
                <a href="novedades.html" class="navbar-link">Novedades</a>
                <a href="sobre-nosotros.html" class="navbar-link">Sobre Nosotros</a>
                <a href="faq.html" class="navbar-link">Preguntas Frecuentes</a>
                <a href="contactos.html" class="navbar-link">Contacto</a>

                <!-- Menu footer -->
                <div class="menu-footer lg:hidden">
                    <div class="menu-footer-social" style="justify-content: center;">
                        <a href="https://wa.me/5491166522722" target="_blank" rel="noopener" aria-label="WhatsApp">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/></svg>
                        </a>
                        <a href="https://www.facebook.com/ceducativovillalugano/" target="_blank" rel="noopener" aria-label="Facebook">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>
                        </a>
                        <a href="https://www.instagram.com/centroeducativovillalugano/" target="_blank" rel="noopener" aria-label="Instagram">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zM12 0C8.741 0 8.333.014 7.053.072 2.695.272.273 2.69.073 7.052.014 8.333 0 8.741 0 12c0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98C8.333 23.986 8.741 24 12 24c3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98C15.668.014 15.259 0 12 0zm0 5.838a6.162 6.162 0 100 12.324 6.162 6.162 0 000-12.324zM12 16a4 4 0 110-8 4 4 0 010 8zm6.406-11.845a1.44 1.44 0 100 2.881 1.44 1.44 0 000-2.881z"/></svg>
                        </a>
                    </div>
                </div>
            </div>

            <!-- Social icons (desktop) -->
            <div class="navbar-social hidden lg:flex items-center flex-shrink-0" style="margin-left: 8px; align-self: stretch;">
                <a href="https://wa.me/5491166522722" target="_blank" rel="noopener" aria-label="WhatsApp"
                    class="navbar-social-icon social-whatsapp">
                    <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/></svg>
                </a>
                <a href="https://www.facebook.com/ceducativovillalugano/" target="_blank" rel="noopener" aria-label="Facebook"
                    class="navbar-social-icon social-facebook">
                    <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>
                </a>
                <a href="https://www.instagram.com/centroeducativovillalugano/" target="_blank" rel="noopener" aria-label="Instagram"
                    class="navbar-social-icon social-instagram">
                    <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zM12 0C8.741 0 8.333.014 7.053.072 2.695.272.273 2.69.073 7.052.014 8.333 0 8.741 0 12c0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98C8.333 23.986 8.741 24 12 24c3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98C15.668.014 15.259 0 12 0zm0 5.838a6.162 6.162 0 100 12.324 6.162 6.162 0 000-12.324zM12 16a4 4 0 110-8 4 4 0 010 8zm6.406-11.845a1.44 1.44 0 100 2.881 1.44 1.44 0 000-2.881z"/></svg>
                </a>
            </div>
        </div>
    </nav>


    <!-- Hero Section -->
    <header id="hero" class="w-full mb-0 shadow-2xl overflow-hidden"
        style="background-color: #013729; border-bottom: 3px solid var(--color-highlight);">
        <div class="container mx-auto p-4 sm:p-6 flex flex-col lg:flex-row items-center justify-center gap-6 lg:gap-12">

            <!-- SECCIÓN TOP 5: TENDENCIAS EN ALZA (Prioridad a la izquierda) -->
            <div class="flex-1 w-full lg:max-w-4xl order-2 lg:order-1 flex flex-col items-center min-w-0 overflow-hidden">
                <div class="flex items-center gap-4 mb-4 justify-center w-full">
                    <!-- Icono de tendencia -->
                    <div class="p-2 rounded-full flex items-center justify-center shrink-0"
                        style="background: rgba(0, 255, 225, 0.08); border: 1px solid rgba(0, 255, 225, 0.2);">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" style="color: var(--color-accent);" fill="none"
                            viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6" />
                        </svg>
                    </div>
                    <h3 class="text-sm md:text-base font-black uppercase tracking-tighter text-white">
                        Lo más buscado
                    </h3>
                </div>

                <div id="top-featured-container" class="w-full">
                    <!-- Se cargará dinámicamente con JS -->
                </div>
            </div>

            <!-- Separator 2 (Desktop only) -->
            <div class="hidden lg:block lg:order-2 w-px bg-white opacity-10 h-32 self-center mx-6"></div>

            <!-- Bloque de Branding Premium (Desktop Only) -->
            <div class="hidden lg:flex items-center justify-center gap-8 order-1 lg:order-3">
                <img src="imagenes/file-removebg-preview.png" alt="Logo CAU Villa Lugano - Universidad Siglo 21" class="w-24 h-24 object-contain"
                    style="filter: brightness(0) invert(1);" loading="lazy" width="96" height="96">
                <div class="flex flex-col h-24 justify-between py-0.5">
                    <h1 class="text-2xl font-black text-white leading-none uppercase tracking-tighter">CAU - VILLA
                        LUGANO</h1>
                    <p class="text-xl font-black text-[#00c7b1] uppercase tracking-wider leading-none">SIGLO 21</p>
                    <span class="text-xl font-bold text-white uppercase leading-none tracking-tight">30 años de
                        experiencia</span>
                </div>
            </div>

        </div>
    </header>


    <div class="container mx-auto pt-0 px-4 pb-4 sm:pt-0 sm:px-8 sm:pb-8">


        <!-- SECCIÓN CARRERAS -->
        <div id="section-carreras" class="section-content active">
            <!-- OFERTA ACADÉMICA: ENCABEZADO SEO (se va con el scroll) -->
            <section aria-label="Oferta académica y buscador de carreras">
                <div class="oferta-hero-heading">
                    <h2>Oferta Académica</h2>
                    <p>Explorá más de 60 carreras de grado, posgrado y formación continua</p>
                </div>
            </section>

            <!-- STICKY: BUSCADOR + FILTROS (queda fijo al hacer scroll) -->
            <div class="sticky-header-wrapper">
                <!-- Buscador semántico -->
                <div class="search-form-wrapper">
                    <form role="search" aria-label="Buscar carrera" onsubmit="return false;">
                        <input type="search" id="search-input" name="buscar-carrera" placeholder="Buscar carrera..."
                            aria-label="Buscar carrera" autocomplete="off">
                        <svg class="search-icon-left" xmlns="http://www.w3.org/2000/svg" width="22" height="22"
                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"
                            stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="11" cy="11" r="8"></circle>
                            <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                        </svg>
                    </form>
                </div>

                <!-- Filtros rápidos -->
                <div class="filter-container" id="filter-container">
                    <button onclick="filterByCategory('all', this)" class="filter-pill filter-pill-all active">Ver Todo</button>
                    <button onclick="filterByCategory('section-licenciaturas', this)"
                        class="filter-pill featured">Licenciaturas</button>
                    <button onclick="filterByCategory('section-tecnicaturas', this)"
                        class="filter-pill featured">Tecnicaturas</button>
                    <button onclick="filterByCategory('section-maestrias', this)" class="filter-pill">Maestrías</button>
                    <button onclick="filterByCategory('section-diplomaturas', this)"
                        class="filter-pill">Diplomaturas</button>
                    <button onclick="filterByCategory('section-certificaciones', this)"
                        class="filter-pill">Certificaciones</button>
                    <button onclick="filterByCategory('section-especializaciones', this)"
                        class="filter-pill">Especializaciones</button>
                    <button onclick="filterByCategory('section-cursos', this)" class="filter-pill">Cursos</button>
                </div>
            </div>

            <!-- CONTENEDOR PRINCIPAL: LISTA + PANEL LATERAL -->
            <div id="main-grid" class="grid grid-cols-1 lg:grid-cols-3 gap-8 transition-all duration-500">

                <!-- COLUMNA IZQUIERDA (LISTADO DE CARRERAS) -->
                <div id="careers-list-column" class="lg:col-span-2 transition-all duration-500" style="min-height: 100vh;">

                    <!-- CONTENEDOR DE RESULTADOS DE BÚSQUEDA (OCULTO POR DEFECTO) -->
                    <div id="search-results-container" class="hidden mb-12">
                        <div class="flex items-center gap-3 mb-6">
                            <div class="p-2 rounded-full"
                                style="background-color: rgba(0, 199, 177, 0.1); border: 1px solid #00c7b1;">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-[#00c7b1]" fill="none"
                                    viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                                </svg>
                            </div>
                            <h4 class="text-2xl font-bold text-white">Resultados de búsqueda</h4>
                        </div>
                        <ul id="search-results-list"
                            class="grid grid-cols-1 md:grid-cols-2 gap-8 career-list-container">
                            <!-- Los resultados se inyectarán aquí -->
                        </ul>
                        <div id="no-results-message" class="hidden text-center py-12">
                            <p class="text-xl text-[#7ca19b]">No se encontraron resultados para tu búsqueda.</p>
                        </div>
                    </div>


                    <!-- SECCIÓN DE GRADO (LICENCIATURAS) -->
                    <section id="section-licenciaturas" class="mb-10">
                        <div class="section-header-container">
                            <div class="section-title-wrapper">
                                <h2 class="text-4xl font-black text-white uppercase tracking-tighter">Licenciaturas /
                                    <span style="color: var(--color-highlight);">Grado</span>
                                </h2>
                                <button class="section-search-trigger"
                                    onclick="toggleSectionSearch('section-licenciaturas', true)"
                                    title="Buscar en esta sección" aria-label="Buscar en Licenciaturas">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none"
                                        viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                                    </svg>
                                </button>
                            </div>
                            <div class="section-search-wrapper">
                                <input type="text" class="section-search-input" placeholder="BUSCAR LICENCIATURA..." aria-label="Buscar licenciatura"
                                    oninput="filterSection('section-licenciaturas', this.value)">
                                <button class="section-search-close" aria-label="Cerrar búsqueda"
                                    onclick="toggleSectionSearch('section-licenciaturas', false)">×</button>
                            </div>
                            <div
                                class="flex-grow h-px bg-gradient-to-r from-[#00c7b1] to-transparent opacity-30 divider">
                            </div>
                        </div>


                        <ul class="grid gap-6 career-list-container mb-8" id="licenciaturas-list">
                            <!-- Las carreras se inyectarán con JS -->
                        </ul>
                    </section>

                    <!-- SECCIÓN DE PREGRADO (TECNICATURAS) -->
                    <section id="section-tecnicaturas" class="mb-10">
                        <div class="section-header-container">
                            <div class="section-title-wrapper">
                                <h2 class="text-4xl font-black text-white uppercase tracking-tighter">Tecnicaturas /
                                    <span style="color: var(--color-highlight);">Pregrado</span>
                                </h2>
                                <button class="section-search-trigger"
                                    onclick="toggleSectionSearch('section-tecnicaturas', true)"
                                    title="Buscar en esta sección" aria-label="Buscar en Tecnicaturas">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none"
                                        viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                                    </svg>
                                </button>
                            </div>
                            <div class="section-search-wrapper">
                                <input type="text" class="section-search-input" placeholder="BUSCAR TECNICATURA..." aria-label="Buscar tecnicatura"
                                    oninput="filterSection('section-tecnicaturas', this.value)">
                                <button class="section-search-close" aria-label="Cerrar búsqueda"
                                    onclick="toggleSectionSearch('section-tecnicaturas', false)">×</button>
                            </div>
                            <div
                                class="flex-grow h-px bg-gradient-to-r from-[#00c7b1] to-transparent opacity-30 divider">
                            </div>
                        </div>


                        <!-- Listado Detallado de Pregrado -->
                        <ul class="grid gap-6 career-list-container mb-8" id="pregrado-list">
                            <!-- Las carreras se inyectarán con JS -->
                        </ul>
                    </section>

                    <!-- SECCIÓN DE MAESTRIAS -->
                    <section id="section-maestrias" class="mb-10">
                        <div class="section-header-container">
                            <div class="section-title-wrapper">
                                <h2 class="text-4xl font-black text-white uppercase tracking-tighter">Maestrías</h2>
                                <button class="section-search-trigger"
                                    onclick="toggleSectionSearch('section-maestrias', true)"
                                    title="Buscar en esta sección" aria-label="Buscar en Maestrías">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none"
                                        viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                                    </svg>
                                </button>
                            </div>
                            <div class="section-search-wrapper">
                                <input type="text" class="section-search-input" placeholder="BUSCAR MAESTRÍA..." aria-label="Buscar maestría"
                                    oninput="filterSection('section-maestrias', this.value)">
                                <button class="section-search-close" aria-label="Cerrar búsqueda"
                                    onclick="toggleSectionSearch('section-maestrias', false)">×</button>
                            </div>
                            <div
                                class="flex-grow h-px bg-gradient-to-r from-[#00c7b1] to-transparent opacity-30 divider">
                            </div>
                        </div>


                        <!-- Listado Detallado de Maestrías -->
                        <ul class="grid gap-6 career-list-container mb-8" id="maestrias-list">
                            <!-- Las carreras se inyectarán con JS -->
                        </ul>
                    </section>

                    <!-- SECCIÓN DE CERTIFICACIONES -->
                    <section id="section-certificaciones" class="mb-10">
                        <div class="section-header-container">
                            <div class="section-title-wrapper">
                                <h2 class="text-4xl font-black text-white uppercase tracking-tighter">Certificaciones
                                </h2>
                                <button class="section-search-trigger"
                                    onclick="toggleSectionSearch('section-certificaciones', true)"
                                    title="Buscar en esta sección" aria-label="Buscar en Certificaciones">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none"
                                        viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                                    </svg>
                                </button>
                            </div>
                            <div class="section-search-wrapper">
                                <input type="text" class="section-search-input" placeholder="BUSCAR CERTIFICACIÓN..." aria-label="Buscar certificación"
                                    oninput="filterSection('section-certificaciones', this.value)">
                                <button class="section-search-close" aria-label="Cerrar búsqueda"
                                    onclick="toggleSectionSearch('section-certificaciones', false)">×</button>
                            </div>
                            <div
                                class="flex-grow h-px bg-gradient-to-r from-[#00c7b1] to-transparent opacity-30 divider">
                            </div>
                        </div>


                        <!-- Listado Detallado de Certificaciones -->
                        <ul class="grid gap-6 career-list-container mb-8" id="certificaciones-list">
                            <!-- Las carreras se inyectarán con JS -->
                        </ul>
                    </section>

                    <!-- SECCIÓN DE ESPECIALIZACIONES -->
                    <section id="section-especializaciones" class="mb-10">
                        <div class="section-header-container">
                            <div class="section-title-wrapper">
                                <h2 class="text-4xl font-black text-white uppercase tracking-tighter">Especializaciones
                                </h2>
                                <button class="section-search-trigger"
                                    onclick="toggleSectionSearch('section-especializaciones', true)"
                                    title="Buscar en esta sección" aria-label="Buscar en Especializaciones">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none"
                                        viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                                    </svg>
                                </button>
                            </div>
                            <div class="section-search-wrapper">
                                <input type="text" class="section-search-input" placeholder="BUSCAR ESPECIALIZACIÓN..." aria-label="Buscar especialización"
                                    oninput="filterSection('section-especializaciones', this.value)">
                                <button class="section-search-close" aria-label="Cerrar búsqueda"
                                    onclick="toggleSectionSearch('section-especializaciones', false)">×</button>
                            </div>
                            <div
                                class="flex-grow h-px bg-gradient-to-r from-[#00c7b1] to-transparent opacity-30 divider">
                            </div>
                        </div>


                        <!-- Listado Detallado de Especializaciones -->
                        <ul class="grid gap-6 career-list-container mb-8" id="especializaciones-list">
                            <!-- Las carreras se inyectarán con JS -->
                        </ul>
                    </section>

                    <!-- SECCIÓN DE DIPLOMATURAS -->
                    <section id="section-diplomaturas" class="mb-10">
                        <div class="section-header-container">
                            <div class="section-title-wrapper">
                                <h2 class="text-4xl font-black text-white uppercase tracking-tighter">Diplomaturas</h2>
                                <button class="section-search-trigger"
                                    onclick="toggleSectionSearch('section-diplomaturas', true)"
                                    title="Buscar en esta sección" aria-label="Buscar en Diplomaturas">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none"
                                        viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                                    </svg>
                                </button>
                            </div>
                            <div class="section-search-wrapper">
                                <input type="text" class="section-search-input" placeholder="BUSCAR DIPLOMATURA..." aria-label="Buscar diplomatura"
                                    oninput="filterSection('section-diplomaturas', this.value)">
                                <button class="section-search-close" aria-label="Cerrar búsqueda"
                                    onclick="toggleSectionSearch('section-diplomaturas', false)">×</button>
                            </div>
                            <div
                                class="flex-grow h-px bg-gradient-to-r from-[#00c7b1] to-transparent opacity-30 divider">
                            </div>
                        </div>

                        <!-- Listado Detallado de Diplomaturas -->
                        <ul class="grid gap-6 career-list-container mb-8" id="diplomaturas-list">
                            <!-- Las carreras se inyectarán con JS -->
                        </ul>
                    </section>

                    <!-- SECCIÓN DE CURSOS -->
                    <section id="section-cursos" class="mb-10">
                        <div class="section-header-container">
                            <div class="section-title-wrapper">
                                <h2 class="text-4xl font-black text-white uppercase tracking-tighter">Cursos</h2>
                                <button class="section-search-trigger"
                                    onclick="toggleSectionSearch('section-cursos', true)"
                                    title="Buscar en esta sección" aria-label="Buscar en Cursos">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none"
                                        viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                                    </svg>
                                </button>
                            </div>
                            <div class="section-search-wrapper">
                                <input type="text" class="section-search-input" placeholder="BUSCAR CURSO..." aria-label="Buscar curso"
                                    oninput="filterSection('section-cursos', this.value)">
                                <button class="section-search-close" aria-label="Cerrar búsqueda"
                                    onclick="toggleSectionSearch('section-cursos', false)">×</button>
                            </div>
                            <div
                                class="flex-grow h-px bg-gradient-to-r from-[#00c7b1] to-transparent opacity-30 divider">
                            </div>
                        </div>


                        <!-- Listado Detallado de Cursos -->
                        <ul class="grid gap-6 career-list-container mb-8" id="cursos-list">
                            <!-- Las carreras se inyectarán con JS -->
                        </ul>
                    </section>


                </div>

                <!-- COLUMNA DERECHA (PANEL DE INFORMACIÓN DINÁMICA) -->
                <aside id="sidebar-column" class="lg:col-span-1 hidden lg:block transition-all duration-500">

                    <!-- SISTEMA DE FAVORITOS (COLAPSABLE) -->
                    <section id="favorites-section" class="sidebar-block favorites-section">
                        <div class="panel-header" onclick="togglePanel('favorites-section')">
                            <div class="panel-title-wrapper">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-[#FFD700]"
                                    fill="currentColor" viewBox="0 0 24 24">
                                    <path
                                        d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.382-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z" />
                                </svg>
                                <h2 class="text-xl font-bold text-white uppercase tracking-tight">Mis Favoritos</h2>
                                <span class="bg-[#00c7b1] text-[#013729] px-2 py-0.5 rounded-full text-xs font-bold"
                                    id="favorites-count">0</span>
                                <button onclick="event.stopPropagation(); favoritesManager.clearAll()"
                                    class="btn-clear-favorites" title="Quitar todos los favoritos">Limpiar</button>
                            </div>
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 panel-chevron" fill="none"
                                viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M19 9l-7 7-7-7" />
                            </svg>
                        </div>
                        <div class="panel-content">
                            <ul class="grid gap-3 favorites-grid mt-4" id="favorites-list">
                                <!-- Los favoritos se inyectarán aquí -->
                            </ul>
                        </div>
                    </section>

                </aside>

            </div>


        </div>



    </div>

    <script>
        /**
         * Seguridad: Función para sanear HTML y prevenir XSS
         */
        function escapeHTML(str) {
            if (!str) return '';
            return str.toString()
                .replace(/&/g, '&amp;')
                .replace(/</g, '&lt;')
                .replace(/>/g, '&gt;')
                .replace(/"/g, '&quot;')
                .replace(/'/g, '&#039;');
        }

        /**
         * Seguridad: Guía de Restricción de API Keys
         * IMPORTANTE: Si integras Google Maps u otras APIs, asegúrate de:
         * 1. Restringir la llave por Referrer de HTTP (ej: https://tudominio.com/*)
         * 2. Restringir el uso solo a las APIs necesarias (ej: Maps JavaScript API).
         * 3. Nunca subir las llaves a repositorios públicos.
         */

        /**
         * Función para scroll suave a una sección específica por su ID.
         */
        function scrollToSection(id) {
            const element = document.getElementById(id);
            if (element) {
                // Si la sección estaba oculta por el filtro, mostrarla antes de hacer scroll
                element.style.display = 'block';

                const headerOffset = 180; // Ajuste para navbar + filter-bar sticky
                const elementPosition = element.getBoundingClientRect().top;
                const offsetPosition = elementPosition + window.pageYOffset - headerOffset;

                window.scrollTo({
                    top: offsetPosition,
                    behavior: 'smooth'
                });
            }
        }

        /**
         * Filtra las secciones para mostrar solo la categoría seleccionada.
         */
        function filterByCategory(categoryId, btn) {
            // Forzar render de secciones lazy si se filtra una categoría específica
            if (categoryId !== 'all' && window._renderAllSections) window._renderAllSections();
            const sections = [
                'section-licenciaturas', 'section-tecnicaturas', 'section-maestrias',
                'section-diplomaturas', 'section-certificaciones', 'section-especializaciones',
                'section-cursos'
            ];

            // 1. Manejar estado de los botones (active)
            const btnContainer = document.getElementById('filter-container');
            if (btnContainer) {
                const buttons = btnContainer.querySelectorAll('.filter-pill');
                buttons.forEach(b => b.classList.remove('active'));
            }
            if (btn) btn.classList.add('active');

            // 2. Mostrar/Ocultar secciones
            sections.forEach(id => {
                const section = document.getElementById(id);
                if (section) {
                    if (categoryId === 'all' || id === categoryId) {
                        section.style.display = 'block';
                        setTimeout(() => section.style.opacity = '1', 10);
                    } else {
                        section.style.display = 'none';
                        section.style.opacity = '0';
                    }
                }
            });

            // 3. Scroll inteligente para enfocar los resultados (Corregido Robusto)
            const stickyWrapper = document.querySelector('.sticky-header-wrapper');
            if (stickyWrapper) {
                // ESTRATEGIA: No confiar en la posición del stickyWrapper porque cambia al flotar.
                // Buscar un punto de anclaje estable: El contenedor padre o el elemento anterior.
                // En este caso, el header "Oferta Académica" es el elemento inmediatamente anterior.
                let targetAnchor = 0;
                
                const previousElement = stickyWrapper.previousElementSibling;
                if (previousElement && previousElement.tagName === 'SECTION') {
                    // Si existe la sección anterior "Oferta Académica", vamos al final de ella
                    targetAnchor = previousElement.offsetTop + previousElement.offsetHeight;
                } else {
                    // Fallback: usar el offsetTop del padre + padding si fuera necesario
                   targetAnchor = stickyWrapper.parentElement ? stickyWrapper.parentElement.offsetTop : 0;
                   // Ajuste manual basado en la estructura conocida (aprox 245px en desktop)
                }

                // Altura del navbar para el offset
                const navbarHeight = parseInt(getComputedStyle(document.documentElement).getPropertyValue('--navbar-height')) || 60;
                
                // Calcular destino: Anclaje - Navbar
                // Si el sticky ya está ocupando espacio, queremos que el inicio del sticky quede bajo el navbar.
                // El "top" del sticky estático es exactamente donde termina el elemento anterior.
                const targetScroll = targetAnchor - navbarHeight;
                
                window.scrollTo({ top: targetScroll, behavior: 'smooth' });
            }
        }

        // Objeto de datos centralizado para todas las carreras (Grado y Pregrado)
        // Objeto de datos que se cargará desde un archivo externo para mejorar el rendimiento
        let careersData = {};


        // Arrays para inyectar en el HTML
        const degreeCategories = {
            'licenciaturas-list': [
                'Licenciatura en Inteligencia Artificial y Robótica', 'Licenciatura en Ciencias de Datos', 'Licenciatura en Seguridad Informática', 'Licenciatura en Informática', 'Licenciatura en Matemática', 'Licenciatura en Bioinformática', 'Licenciatura en Administración de Infraestructura Tecnológica',
                'Abogacía', 'Escribanía', 'Contador Público', 'Licenciatura en Administración', 'Licenciatura en Finanzas', 'Actuario', 'Licenciatura en Comercio Internacional', 'Licenciatura en Comercialización', 'Licenciatura en Negocios Digitales', 'Licenciatura en Emprendimiento - CCC', 'Licenciatura en Desarrollo De Negocios Inmobiliarios', 'Licenciatura en Administración Agraria',
                'Licenciatura en Logística Global', 'Licenciatura en Gestión Ambiental', 'Licenciatura en Higiene, Seguridad y Medio ambiente del Trabajo', 'Licenciatura en Gestión Turística', 'Licenciatura en Administración Hotelera', 'Licenciatura en Gestión de Recursos Humanos', 'Licenciatura en Gestión Deportiva', 'Licenciatura en Administración de Servicios de Salud CCC',
                'Licenciatura en Ciencia Política y Gobierno', 'Licenciatura en Administración Pública', 'Licenciatura en Relaciones Internacionales', 'Licenciatura en Criminología y Seguridad', 'Licenciatura en Periodismo', 'Licenciatura en Publicidad', 'Licenciatura en Relaciones Públicas e Institucionales', 'Licenciatura en Diseño y Animación Digital', 'Licenciatura en Gerontología', 'Licenciatura en Terapia Ocupacional y Desarrollo Humano', 'Licenciatura en Antropología Organizacional', 'Licenciatura en Educación (CCC)', 'Licenciatura en Psicopedagogía (CCC)', 'Licenciatura en Psicopedagogía', 'Licenciatura en Nutrición', 'Licenciatura en Educación y Nuevas Tecnologías', 'Profesorado Universitario para Nivel Secundario y Superior'
            ],
            'pregrado-list': [
                'Martillero, Corredor Público y Corredor Inmobiliario', 'Procurador', 'Tecnicatura en investigación de la escena del crimen', 'Tecnicatura en Administración y Gestión Tributaria', 'Tecnicatura en Gestión de Empresas Familiares', 'Tecnicatura Universitaria en Administración y Gestión de Políticas Públicas', 'Tecnicatura en Responsabilidad y Gestión Social', 'Tecnicatura en Higiene y Seguridad Laboral', 'Tecnicatura Universitaria en Diseño y Animación Digital', 'Tecnicatura en Marketing y Publicidad Digital', 'Tecnicatura Universitaria en Recursos Turísticos', 'Tecnicatura Universitaria en Hidrocarburos y Geociencias', 'Tecnicatura Universitaria en Gestión y Auditorías Ambientales', 'Tecnicatura en Dirección de Equipos de venta', 'Tecnicatura en Gestión Contable e impositiva', 'Tecnicatura en Relaciones Laborales', 'Tecnicatura en Dirección de Protocolo, Organización de Eventos y RRPP', 'Tecnicatura Universitaria en Gestión de Moda', 'Tecnicatura Universitaria en Gestión del Clima Laboral de la Organización', 'Tecnicatura Universitaria en Promoción Comunitaria en Niñez y Adolescencia', 'Tecnicatura en Gestión Administrativas de Servicios de Salud', 'Tecnicatura Universitaria en Redes Informáticas y Telecomunicaciones', 'Tecnicatura Universitaria en Administración de la Propiedad Horizontal y Conjuntos Inmobiliarios', 'Tecnicatura en Diseño y Desarrollo de Videojuegos', 'Tecnicatura Universitaria en Negocios Agroecológicos'
            ],
            'maestrias-list': ['Maestría en Innovación Educativa', 'Maestría en Criminología y Ciencias Forenses'],
            'diplomaturas-list': ['Diplomatura en Láser y Tecnologías Médicas', 'Diplomatura en Liderazgo Coach e Inteligencia Emocional'],
            'certificaciones-list': ['Nutrición Consciente-Mindset', 'CERTIFICADO EN E-COMMERCE', 'Certificado en Asistencia y Cuidado de las Personas Mayores', 'Certificado en Social Media Management'],
            'especializaciones-list': ['Gestión De Energías Renovables', 'Especialización en Políticas Públicas de Seguridad y Criminología', 'Especialización en Logística y Cadena de Suministro', 'Especialización en Negocios Internacionales'],
            'cursos-list': ['CURSO DE SEGURIDAD PRIVADA - NIVEL I', 'Curso en coaching nutricional', 'Estrategia para el Desarrollo del Fútbol Juvenil', 'Curso de Comercio Internacional', 'Certificado en Nutrición Deportiva en Fútbol', 'Prompt Engineering', 'Análisis de Negocios (Business Analysis)']
        };

        const sectionCarreras = document.getElementById('section-carreras');
        const listContainers = document.querySelectorAll('.career-list-container');
        let activeElement = null; // Para rastrear el elemento activo (clicado)

        /**
         * Función para renderizar una lista de carreras en el DOM
         */
        /**
         * Parsea el nombre de la carrera para separar el prefijo (Licenciatura, Tecnicatura, etc.)
         * del resto del nombre, mejorando la legibilidad.
         * Soporta resaltado de búsqueda si se proporciona 'query'.
         */
        /**
         * Helper para extraer prefijo y nombre limpio de una carrera.
         * Usado tanto para formateo como para cálculo de peso visual.
         */
        function getCareerInfo(name) {
            let cleanName = name;
            let prefix = '';

            // Detectar prefijo base
            if (name.startsWith('Lic.') || name.startsWith('Lic ')) {
                prefix = 'Licenciatura';
                cleanName = name.substring(4).trim();
            } else if (name.startsWith('Licenciatura')) {
                prefix = 'Licenciatura';
                cleanName = name.substring(12).trim();
            } else if (name.startsWith('Tec.') || name.startsWith('Tec ')) {
                prefix = 'Tecnicatura';
                cleanName = name.substring(4).trim();
            } else if (name.startsWith('Tecnicatura')) {
                prefix = 'Tecnicatura';
                cleanName = name.substring(11).trim();
            }

            // Simplificación: Eliminar "Universitaria", "Universitario" o "Univ." del nombre limpio
            // Esto evita "Tecnicatura Universitaria en..." y lo deja como "Tecnicatura en..."
            cleanName = cleanName.replace(/Universitaria|Universitario|Univ\./g, '').replace(/\s\s+/g, ' ').trim();

            if (cleanName.toLowerCase().startsWith('en ')) {
                prefix += ' en';
                cleanName = cleanName.substring(3).trim();
            }

            if (cleanName.length > 0) {
                cleanName = cleanName.charAt(0).toUpperCase() + cleanName.slice(1);
            }

            return { prefix, cleanName };
        }

        function getFormattedCareerHTML(name, query = '') {
            const { prefix, cleanName } = getCareerInfo(name);
            const prefixClass = 'text-xs uppercase tracking-wider opacity-70 block text-[#00c7b1] font-bold';
            const nameStyle = 'word-break: normal; overflow-wrap: break-word; hyphens: manual; -webkit-hyphens: manual;';

            const processText = (text) => query ? highlightText(text, query) : escapeHTML(text);

            if (prefix) {
                // Posición ajustada para cuando ya no hay checkbox a la izquierda
                return `<span class="${prefixClass} absolute top-2 left-4 pointer-events-none">${processText(prefix)}</span>
                         <span class="career-name block leading-tight pt-3" style="${nameStyle}">${processText(cleanName)}</span>`;
            } else {
                return `<span class="career-name block leading-tight" style="${nameStyle}">${processText(name)}</span>`;
            }
        }

        function renderCareerList(containerId, careerNames) {
            const container = document.getElementById(containerId);
            if (!container) return;

            const getWeight = (n) => getCareerInfo(n).cleanName.length;
            const sortedNames = [...careerNames].sort((a, b) => getWeight(a) - getWeight(b));

            const listClasses = "md:grid-cols-2";
            container.className = `grid gap-4 career-list-container mb-6 ${listClasses}`;

            container.innerHTML = sortedNames.map(name => {
                const isFav = favoritesManager ? favoritesManager.isFavorite(name) : false;
                const favClass = isFav ? 'is-favorite' : '';

                return `
                <li class="rounded-xl career-name-list career-name-list-mode-list group p-4 flex items-center justify-between gap-4 cursor-pointer" data-career-name="${escapeHTML(name)}" onclick="handleCareerClick(this)">
                    <div class="flex-grow">
                        ${getFormattedCareerHTML(name)}
                    </div>

                    <div class="flex items-center gap-2 sm:gap-3 flex-shrink-0">
                         <button class="favorite-btn hidden sm:flex ${favClass}" onclick="event.stopPropagation(); favoritesManager.toggle('${escapeHTML(name)}')" title="${isFav ? 'Quitar de favoritos' : 'Agregar a favoritos'}" aria-label="${isFav ? 'Quitar de favoritos' : 'Agregar a favoritos'}">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.382-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z" />
                            </svg>
                        </button>
                        <span class="hidden sm:inline-block text-xs font-bold detail-link px-4 py-2 rounded-lg cursor-pointer text-center" onclick="event.stopPropagation(); handleCareerClick(this.closest('.career-name-list'))" style="color: #1c2f31; background: linear-gradient(45deg, #48b3a4, #00c7b1, #00ffe1, #00c7b1, #48b3a4); background-size: 200% 200%; transition: background-position 0.3s ease, opacity 0.3s ease;">Ver Detalle</span>
                    </div>
                </li>
            `}).join('');
        }

        /**
         * Actualiza el contenido del panel lateral con los datos de la carrera.
         */
        function updateInfoPanel(careerName) {
            const data = careersData[careerName];
            if (data) {
                const fullText = data.fullText || '';

                // Abrir modal con datos de la carrera
                openCareerModal(careerName, data, fullText);
            }
        }

        /**
         * Alternar estado de colapso de un panel
         */
        function togglePanel(panelId) {
            const panel = document.getElementById(panelId);
            if (panel) {
                panel.classList.toggle('collapsed');
            }
        }

        /**
             * Maneja el evento de click en una carrera.
             */
        function handleCareerClick(item) {
            const careerName = item.getAttribute('data-career-name');

            // Asegurar que la sección sea visible si estaba oculta por un filtro
            const parentSection = item.closest('section');
            if (parentSection && parentSection.style.display === 'none') {
                filterByCategory('all', document.querySelector('#filter-container button[onclick*="all"]'));
            }

            // 1. Limpiar el estado previo de TODAS las carreras para evitar duplicados
            document.querySelectorAll('.career-name-list').forEach(el => {
                el.classList.remove('active', 'active-feature-highlight');
            });

            // 2. Establecer el nuevo elemento activo
            activeElement = item;
            item.classList.add('active');

            // 3. Actualizar el panel
            updateInfoPanel(careerName);

        }

        /**
         * Clase para gestionar el sistema de Favoritos
         */
        class FavoritesManager {
            constructor() {
                this.favorites = JSON.parse(localStorage.getItem('user_favorites') || '[]');
                this.section = document.getElementById('favorites-section');
                this.list = document.getElementById('favorites-list');
                this.count = document.getElementById('favorites-count');
            }

            isFavorite(name) {
                return this.favorites.includes(name);
            }

            toggle(name) {
                const index = this.favorites.indexOf(name);
                if (index > -1) {
                    this.favorites.splice(index, 1);
                } else {
                    if (this.favorites.length >= 5) {
                        alert('Puedes agregar hasta un máximo de 5 carreras a tus favoritos.');
                        return;
                    }
                    this.favorites.push(name);
                }
                this.save();
                this.updateUI();

                // Actualizar iconos en todas las listas visibles de forma explícita
                const isNowFavorite = this.isFavorite(name);
                document.querySelectorAll(`.career-name-list[data-career-name="${name}"] .favorite-btn`).forEach(btn => {
                    if (isNowFavorite) {
                        btn.classList.add('is-favorite');
                    } else {
                        btn.classList.remove('is-favorite');
                    }
                });
            }

            clearAll() {
                if (this.favorites.length === 0) return;

                if (confirm('¿Estás seguro de que deseas quitar todos los favoritos?')) {
                    this.favorites = [];
                    this.save();
                    this.updateUI();

                    // Actualizar todos los iconos en las listas
                    document.querySelectorAll('.favorite-btn.is-favorite').forEach(btn => {
                        btn.classList.remove('is-favorite');
                    });
                }
            }

            save() {
                localStorage.setItem('user_favorites', JSON.stringify(this.favorites));
            }

            updateUI() {
                if (!this.list) return;

                if (this.favorites.length === 0) {
                    this.section.style.display = 'none';
                    this.list.innerHTML = '';
                } else {
                    this.section.style.display = 'block';
                    this.count.textContent = this.favorites.length;

                    // Ordenar favoritos por peso visual (longitud de nombre) para consistencia
                    const getWeight = (n) => getCareerInfo(n).cleanName.length;
                    const sortedFavs = [...this.favorites].sort((a, b) => getWeight(a) - getWeight(b));

                    this.list.innerHTML = sortedFavs.map(name => `
                        <li class="rounded-xl career-name-list career-name-list-mode-list group p-4 flex items-center justify-between gap-4 cursor-pointer" data-career-name="${escapeHTML(name)}" onclick="handleCareerClick(this)">
                            <div class="flex-grow">
                                ${getFormattedCareerHTML(name)}
                            </div>

                            <div class="flex items-center gap-2 sm:gap-3 flex-shrink-0">
                                <button class="favorite-btn is-favorite" onclick="event.stopPropagation(); favoritesManager.toggle('${escapeHTML(name)}')" aria-label="Quitar de favoritos">
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.382-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z" />
                                    </svg>
                                </button>
                                <span class="hidden sm:inline-block text-xs font-bold detail-link px-4 py-2 rounded-lg cursor-pointer text-center" onclick="event.stopPropagation(); handleCareerClick(this.closest('.career-name-list'))" style="color: #1c2f31; background: linear-gradient(45deg, #48b3a4, #00c7b1, #00ffe1, #00c7b1, #48b3a4); background-size: 200% 200%; transition: background-position 0.3s ease, opacity 0.3s ease;">Ver Detalle</span>
                            </div>
                        </li>
                    `).join('');
                }
            }
        }

        let favoritesManager;

        let comparisonManager; // Se mantiene por compatibilidad si es referenciado, pero sin lógica activa.

        // Medir navbar y sincronizar --navbar-height + --full-width
        function syncNavbarHeight() {
            const navbar = document.querySelector('.main-navbar');
            if (navbar) {
                const h = navbar.getBoundingClientRect().height;
                document.documentElement.style.setProperty('--navbar-height', h + 'px');
            }
            document.documentElement.style.setProperty('--full-width', document.documentElement.clientWidth + 'px');
        }
        syncNavbarHeight();

        // Mantener --navbar-height SIEMPRE sincronizado con ResizeObserver
        const navbarEl = document.querySelector('.main-navbar');
        if (navbarEl && window.ResizeObserver) {
            new ResizeObserver(() => {
                const h = navbarEl.getBoundingClientRect().height;
                document.documentElement.style.setProperty('--navbar-height', h + 'px');
            }).observe(navbarEl);
        }

        // Lógica para esconder/mostrar navbar al scrollear (Solo Mobile)
        let lastScrollY = window.scrollY;
        let isResizing = false;

        window.addEventListener('scroll', () => {
            if (isResizing || window.innerWidth > 640) return;

            const navbar = document.querySelector('.main-navbar');
            const stickyHeader = document.querySelector('.sticky-header-wrapper');
            const currentScrollY = window.scrollY;
            const navH = navbar ? navbar.offsetHeight : 50;

            if (currentScrollY > lastScrollY && currentScrollY > 60) {
                if (navbar) navbar.classList.add('navbar-hidden');
                if (stickyHeader) stickyHeader.style.top = '0px';
            } else {
                if (navbar) navbar.classList.remove('navbar-hidden');
                if (stickyHeader) stickyHeader.style.top = navH + 'px';
            }
            lastScrollY = currentScrollY;
        }, { passive: true });

        // Fix para que el navbar reaparezca si se agranda la pantalla
        let resizeTimeout;
        window.addEventListener('resize', () => {
            isResizing = true;
            clearTimeout(resizeTimeout);

            const navbar = document.querySelector('.main-navbar');
            const stickyHeader = document.querySelector('.sticky-header-wrapper');

            // Desactivar transiciones
            if (navbar) {
                navbar.style.transition = 'none';
                navbar.classList.remove('navbar-hidden');
            }
            if (stickyHeader) {
                stickyHeader.style.transition = 'none';
                stickyHeader.style.top = '';
            }

            syncNavbarHeight();
            void document.body.offsetHeight;

            // Restaurar transiciones y desbloquear scroll después de que el resize termine
            resizeTimeout = setTimeout(() => {
                if (navbar) navbar.style.transition = '';
                if (stickyHeader) stickyHeader.style.transition = '';
                lastScrollY = window.scrollY;
                isResizing = false;
            }, 150);
        });

        // Función para inicializar la aplicación con datos externos
        async function initializeApp() {
            try {
                // Mostrar skeleton loaders si fuera necesario (aquí ya están en el HTML)
                const response = await fetch('datos_carreras.json');
                if (!response.ok) throw new Error('Error al cargar datos de carreras');
                careersData = await response.json();

                // Inicializar gestor de favoritos
                favoritesManager = new FavoritesManager();
                favoritesManager.updateUI();

                // Renderizar solo las primeras secciones visibles de inmediato
                const immediateContainers = ['licenciaturas-list'];
                immediateContainers.forEach(id => {
                    if (degreeCategories[id]) renderCareerList(id, degreeCategories[id]);
                });

                // Lazy render: el resto se renderiza al entrar en viewport
                const deferredContainers = Object.keys(degreeCategories)
                    .filter(id => !immediateContainers.includes(id));
                const renderedSections = new Set(immediateContainers);

                const lazyObserver = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            const id = entry.target.id;
                            if (!renderedSections.has(id) && degreeCategories[id]) {
                                renderCareerList(id, degreeCategories[id]);
                                renderedSections.add(id);
                            }
                            lazyObserver.unobserve(entry.target);
                        }
                    });
                }, { rootMargin: '200px' });

                deferredContainers.forEach(id => {
                    const el = document.getElementById(id);
                    if (el) lazyObserver.observe(el);
                });

                // Función global para forzar render de todas las secciones (usada por búsqueda)
                window._renderAllSections = function() {
                    deferredContainers.forEach(id => {
                        if (!renderedSections.has(id) && degreeCategories[id]) {
                            renderCareerList(id, degreeCategories[id]);
                            renderedSections.add(id);
                            const el = document.getElementById(id);
                            if (el) lazyObserver.unobserve(el);
                        }
                    });
                };

                // Renderizar carreras destacadas
                renderTopFeaturedCareers();

                console.log('App inicializada correctamente con datos externos.');
            } catch (error) {
                console.error('Fallo en la inicialización:', error);
                // Fallback: mostrar mensaje al usuario
                document.getElementById('section-carreras').innerHTML = '<div class="text-center py-20 text-white">Hubo un error al cargar las carreras. Por favor, recarga la página.</div>';
            }
        }

        // Ejecutar inicialización
        document.addEventListener('DOMContentLoaded', initializeApp);


        // 3. Función de búsqueda mejorada con fuzzy matching
        let searchTimeout;
        const searchInput = document.getElementById('search-input');

        // Algoritmo de distancia de Levenshtein simplificado
        function levenshteinDistance(str1, str2) {
            const len1 = str1.length;
            const len2 = str2.length;
            const matrix = Array(len1 + 1).fill(null).map(() => Array(len2 + 1).fill(0));

            for (let i = 0; i <= len1; i++) matrix[i][0] = i;
            for (let j = 0; j <= len2; j++) matrix[0][j] = j;

            for (let i = 1; i <= len1; i++) {
                for (let j = 1; j <= len2; j++) {
                    const cost = str1[i - 1] === str2[j - 1] ? 0 : 1;
                    matrix[i][j] = Math.min(
                        matrix[i - 1][j] + 1,
                        matrix[i][j - 1] + 1,
                        matrix[i - 1][j - 1] + cost
                    );
                }
            }
            return matrix[len1][len2];
        }

        // Función para calcular relevancia de búsqueda
        function calculateRelevance(name, query) {
            const normalizedName = name.normalize("NFD").replace(/[\u0300-\u036f]/g, "").toLowerCase();
            const normalizedQuery = query.normalize("NFD").replace(/[\u0300-\u036f]/g, "").toLowerCase();

            // Match exacto = máxima relevancia
            if (normalizedName === normalizedQuery) return 1000;

            // Comienza con la query = muy alta relevancia
            if (normalizedName.startsWith(normalizedQuery)) return 900;

            // Contiene la query exacta = alta relevancia
            if (normalizedName.includes(normalizedQuery)) return 800;

            // Fuzzy matching en palabras individuales
            const words = normalizedName.split(/\s+/);
            let bestWordScore = 0;

            words.forEach(word => {
                if (word.includes(normalizedQuery)) {
                    bestWordScore = Math.max(bestWordScore, 700);
                } else {
                    const distance = levenshteinDistance(word, normalizedQuery);
                    const maxLen = Math.max(word.length, normalizedQuery.length);
                    const similarity = 1 - (distance / maxLen);

                    // Toleramos hasta 2 caracteres de diferencia
                    if (distance <= 2 && similarity > 0.6) {
                        bestWordScore = Math.max(bestWordScore, 500 * similarity);
                    }
                }
            });

            return bestWordScore;
        }

        // Función para resaltar términos encontrados
        function highlightText(text, query) {
            if (!query) return text;

            const normalizedText = text.normalize("NFD").replace(/[\u0300-\u036f]/g, "");
            const normalizedQuery = query.normalize("NFD").replace(/[\u0300-\u036f]/g, "");

            const regex = new RegExp(`(${normalizedQuery})`, 'gi');
            const parts = normalizedText.split(regex);

            let result = '';
            let charIndex = 0;

            parts.forEach(part => {
                const originalPart = text.substr(charIndex, part.length);
                if (part.toLowerCase() === normalizedQuery.toLowerCase()) {
                    result += `<mark class="search-highlight">${originalPart}</mark>`;
                } else {
                    result += originalPart;
                }
                charIndex += part.length;
            });

            return result;
        }

        function searchCareers() {
            // Forzar render de todas las secciones para que la búsqueda encuentre todo
            if (window._renderAllSections) window._renderAllSections();
            const query = searchInput.value.trim().toLowerCase();
            const searchResultsContainer = document.getElementById('search-results-container');
            const searchResultsList = document.getElementById('search-results-list');
            const noResultsMessage = document.getElementById('no-results-message');
            const mainGrid = document.getElementById('main-grid');

            // Buscar todas las secciones dentro del contenedor de carreras
            const sectionCarrerasElement = document.getElementById('section-carreras');
            const sections = sectionCarrerasElement ? sectionCarrerasElement.querySelectorAll('section') : [];
            const filterContainer = document.querySelector('.filter-container');

            if (query === '') {
                // Cancelar cualquier búsqueda pendiente
                clearTimeout(searchTimeout);
                // Sin búsqueda: restaurar vista original inmediatamente
                searchInput.parentElement.classList.remove('search-loading');
                searchResultsContainer.classList.add('hidden');
                sections.forEach(s => s.classList.remove('hidden'));
                if (filterContainer) filterContainer.style.display = '';
                return;
            }

            // Mostrar loading state
            searchInput.parentElement.classList.add('search-loading');

            // Ocultar filtros durante la búsqueda
            if (filterContainer) filterContainer.style.display = 'none';

            // Simular delay de búsqueda para mostrar el loader (en producción esto sería real)
            clearTimeout(searchTimeout);
            searchTimeout = setTimeout(() => {
                const searchResultsContainer = document.getElementById('search-results-container');
                const searchResultsList = document.getElementById('search-results-list');
                const noResultsMessage = document.getElementById('no-results-message');
                const sectionCarreras = document.getElementById('section-carreras');

                // Ocultar secciones originales y mostrar contenedor de resultados
                if (sectionCarreras) {
                    const sections = sectionCarreras.querySelectorAll('.career-section');
                    sections.forEach(s => s.classList.add('hidden'));
                }
                if (searchResultsContainer) searchResultsContainer.classList.remove('hidden');

                // Buscar con fuzzy matching
                const getWeight = (n) => getCareerInfo(n).cleanName.length;

                const searchResults = Object.keys(careersData).map(name => ({
                    name,
                    relevance: calculateRelevance(name, query),
                    weight: getWeight(name)
                })).filter(result => result.relevance > 0)
                    .sort((a, b) => {
                        // Primero por relevancia
                        if (b.relevance !== a.relevance) return b.relevance - a.relevance;
                        // Tie-breaker: peso visual (longitud)
                        return a.weight - b.weight;
                    });

                searchInput.parentElement.classList.remove('search-loading');

                if (searchResults.length > 0) {
                    noResultsMessage.classList.add('hidden');
                    searchResultsList.innerHTML = searchResults.map(result => {
                        const isFav = favoritesManager ? favoritesManager.isFavorite(result.name) : false;
                        const favClass = isFav ? 'is-favorite' : '';

                        return `
                        <li class="rounded-xl career-name-list career-name-list-mode-list group p-4 flex items-center justify-between gap-4 cursor-pointer" data-career-name="${escapeHTML(result.name)}" onclick="handleCareerClick(this)">
                            <div class="flex-grow">
                                ${getFormattedCareerHTML(result.name, query)}
                            </div>

                            <div class="flex items-center gap-2 sm:gap-3 flex-shrink-0">
                                <button class="favorite-btn hidden sm:flex ${favClass}" onclick="event.stopPropagation(); favoritesManager.toggle('${escapeHTML(result.name)}')" title="${isFav ? 'Quitar de favoritos' : 'Agregar a favoritos'}" aria-label="${isFav ? 'Quitar de favoritos' : 'Agregar a favoritos'}">
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.382-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z" />
                                    </svg>
                                </button>
                                <span class="hidden sm:inline-block text-xs font-bold detail-link px-4 py-2 rounded-lg cursor-pointer text-center" onclick="event.stopPropagation(); handleCareerClick(this.closest('.career-name-list'))" style="color: #1c2f31; background: linear-gradient(45deg, #48b3a4, #00c7b1, #00ffe1, #00c7b1, #48b3a4); background-size: 200% 200%; transition: background-position 0.3s ease, opacity 0.3s ease;">Ver Detalle</span>
                            </div>
                        </li>
                    `}).join('');

                    // Los listeners ahora se manejan vía atributos 'onclick' en el HTML generado
                } else {
                    searchResultsList.innerHTML = '';
                    noResultsMessage.classList.remove('hidden');
                }
            }, 300); // Debounce de 300ms
        }

        /**
         * Activa o desactiva la búsqueda por sección
         */
        function toggleSectionSearch(sectionId, active) {
            const section = document.getElementById(sectionId);
            const titleWrapper = section.querySelector('.section-title-wrapper');
            const searchWrapper = section.querySelector('.section-search-wrapper');
            const divider = section.querySelector('.divider');
            const input = searchWrapper.querySelector('input');

            if (active) {
                titleWrapper.style.display = 'none';
                divider.style.display = 'none';
                searchWrapper.classList.add('active');
                input.focus();
            } else {
                titleWrapper.style.display = 'flex';
                divider.style.display = 'block';
                searchWrapper.classList.remove('active');
                input.value = '';
                filterSection(sectionId, ''); // Limpiar filtro
            }
        }

        /**
         * Filtra los elementos dentro de una sección específica
         */
        function filterSection(sectionId, query) {
            const section = document.getElementById(sectionId);
            const items = section.querySelectorAll('.career-name-list');
            const normalizedQuery = query.normalize("NFD").replace(/[\u0300-\u036f]/g, "").toLowerCase();

            items.forEach(item => {
                const careerName = item.getAttribute('data-career-name').normalize("NFD").replace(/[\u0300-\u036f]/g, "").toLowerCase();
                if (careerName.includes(normalizedQuery)) {
                    item.classList.remove('hidden');
                    // Si el contenedor padre estaba oculto por una búsqueda previa del buscador principal
                    item.closest('ul').classList.remove('hidden');
                } else {
                    item.classList.add('hidden');
                }
            });

            // Ocultar los tags <ul> si no tienen elementos visibles
            section.querySelectorAll('ul').forEach(ul => {
                const visibleItems = ul.querySelectorAll('.career-name-list:not(.hidden)');
                if (visibleItems.length === 0 && query !== '') {
                    ul.classList.add('hidden');
                } else {
                    ul.classList.remove('hidden');
                }
            });
        }

        // 4. Asignar listeners al input de búsqueda para mover sidebar
        searchInput.addEventListener('input', searchCareers);

        searchInput.addEventListener('focus', () => {
            // Restore and fix scroll: scroll to the input but leaving space for the sticky navbar
            setTimeout(() => {
                const yOffset = -100; // Espacio extra para que no pegue arriba de todo (considerando navbar)
                const y = searchInput.getBoundingClientRect().top + window.pageYOffset + yOffset;
                window.scrollTo({ top: y, behavior: 'smooth' });
            }, 100);
        });

        searchInput.addEventListener('blur', () => {
            // Layout fijo
        });


        // 8. Inicializar la vista al cargar la página
        document.addEventListener('DOMContentLoaded', () => {

            // Mobile menu toggle and Active Link logic
            (function() {
                const toggle = document.getElementById('mobile-toggle');
                const menu = document.getElementById('navbar-menu');
                const closeBtn = document.getElementById('menu-close');
                if (!toggle || !menu) return;

                let lastFocused = null;

                function openMenu() {
                    lastFocused = document.activeElement;
                    menu.classList.add('active');
                    toggle.setAttribute('aria-expanded', 'true');
                    document.body.classList.add('overflow-hidden');
                    closeBtn?.focus();
                }

                function closeMenu() {
                    menu.classList.remove('active');
                    toggle.setAttribute('aria-expanded', 'false');
                    document.body.classList.remove('overflow-hidden');
                    lastFocused?.focus();
                }

                toggle.addEventListener('click', (e) => {
                    e.stopPropagation();
                    menu.classList.contains('active') ? closeMenu() : openMenu();
                });

                closeBtn?.addEventListener('click', closeMenu);

                document.addEventListener('click', (e) => {
                    if (menu.classList.contains('active') && !menu.contains(e.target) && !toggle.contains(e.target)) {
                        closeMenu();
                    }
                });

                document.addEventListener('keydown', (e) => {
                    if (e.key === 'Escape' && menu.classList.contains('active')) {
                        closeMenu();
                    }
                });

                menu.querySelectorAll('.navbar-link').forEach(link => {
                    link.addEventListener('click', closeMenu);
                });

                menu.addEventListener('keydown', (e) => {
                    if (e.key !== 'Tab') return;
                    const focusable = menu.querySelectorAll('button, a[href]');
                    const first = focusable[0];
                    const last = focusable[focusable.length - 1];
                    if (e.shiftKey && document.activeElement === first) {
                        e.preventDefault();
                        last.focus();
                    } else if (!e.shiftKey && document.activeElement === last) {
                        e.preventDefault();
                        first.focus();
                    }
                });

                // Active Link logic
                const currentPath = window.location.pathname.split('/').pop() || 'index.html';
                menu.querySelectorAll('.navbar-link').forEach(link => {
                    const href = link.getAttribute('href');
                    if (href === currentPath) {
                        link.classList.add('active');
                    } else {
                        link.classList.remove('active');
                    }
                });
            })();
        });

        // 9. Funcionalidad dinámica para el Top 5
        // Lista manual de carreras destacadas (gestionada manualmente)
        const featuredCareers = [
            'Abogacía',
            'Contador Público',
            'Martillero, Corredor Público y Corredor Inmobiliario',
            'Licenciatura en Administración',
            'Licenciatura en Comercialización',
            'Licenciatura en Informática',
            'Licenciatura en Gestión de Recursos Humanos',
            'Licenciatura en Finanzas'
        ];

        function renderTopFeaturedCareers() {
            const container = document.getElementById('top-featured-container');
            if (!container) return;

            const sorted = featuredCareers;

            // Nombres cortos para el carrusel (máx ~20 chars)
            function shortName(name) {
                const { cleanName } = getCareerInfo(name);
                let short = cleanName || name;
                // Truncar en " y " o " e " si queda muy largo
                if (short.length > 22) {
                    const cut = short.search(/\s[ye]\s/i);
                    if (cut > 5) short = short.substring(0, cut);
                }
                return short;
            }

            function buildSetHTML(items) {
                return items.map((name) => {
                    const displayName = shortName(name);
                    const slug = name.toLowerCase().normalize('NFD').replace(/[\u0300-\u036f]/g, '').replace(/[^a-z0-9]+/g, '-').replace(/(^-|-$)/g, '');
                    const imgPath = 'imagenes/imagenes_carreras/' + slug + '.webp';
                    return `
                        <button onclick="handleFeaturedClick('${name.replace(/'/g, "\\'")}')"
                            class="featured-career-card group relative flex items-center justify-center px-3 py-2 rounded-xl">
                            <div class="featured-bg" style="background-image: url('${imgPath}');"></div>
                            <div class="featured-overlay"></div>
                            <span class="featured-text text-[11px] sm:text-xs font-semibold text-center leading-tight" style="color: rgba(255,255,255,0.92);" title="${name}">${displayName}</span>
                        </button>`;
                }).join('');
            }

            const setHTML = buildSetHTML(sorted);

            // Render cards in the track
            container.innerHTML = `<div class="carousel-track">${setHTML}</div>`;

            // Double rAF ensures layout is fully computed before measuring
            requestAnimationFrame(() => { requestAnimationFrame(() => {
                const track = container.querySelector('.carousel-track');
                if (!track) return;
                const realCount = track.children.length;
                if (!realCount) return;

                const VISIBLE = 4;
                const gap = parseFloat(getComputedStyle(track).gap) || 12;

                // Clone enough cards so track never runs out while sliding forward
                const needed = realCount + VISIBLE;
                const originals = Array.from(track.children);
                while (track.children.length < needed) {
                    track.appendChild(originals[track.children.length % realCount].cloneNode(true));
                }

                // Size every card so exactly VISIBLE fill the container edge-to-edge
                function sizeCards() {
                    const w = container.clientWidth;
                    const cardW = Math.floor(((w - (VISIBLE - 1) * gap) / VISIBLE) * 100) / 100;
                    Array.from(track.children).forEach(c => { c.style.width = cardW + 'px'; });
                    return cardW;
                }

                let cardW = sizeCards();
                let index = 0;
                let intervalId = null;
                let isTransitioning = false;

                function getStep() { return cardW + gap; }

                function slide() {
                    if (isTransitioning) return;
                    index++;
                    isTransitioning = true;
                    track.style.transition = 'transform 0.45s ease';
                    track.style.transform = `translateX(-${index * getStep()}px)`;
                }

                track.addEventListener('transitionend', () => {
                    isTransitioning = false;
                    if (index >= realCount) {
                        track.style.transition = 'none';
                        index = 0;
                        track.style.transform = 'translateX(0)';
                        void track.offsetWidth;
                    }
                });

                // Recalculate on resize
                let resizeTimer;
                window.addEventListener('resize', () => {
                    clearTimeout(resizeTimer);
                    resizeTimer = setTimeout(() => {
                        cardW = sizeCards();
                        track.style.transition = 'none';
                        track.style.transform = `translateX(-${index * getStep()}px)`;
                        void track.offsetWidth;
                    }, 100);
                });

                function startAutoplay() {
                    if (intervalId) return;
                    intervalId = setInterval(slide, 3000);
                }

                function stopAutoplay() {
                    clearInterval(intervalId);
                    intervalId = null;
                }

                container.addEventListener('mouseenter', stopAutoplay);
                container.addEventListener('mouseleave', startAutoplay);
                container.addEventListener('touchstart', stopAutoplay, { passive: true });
                container.addEventListener('touchend', () => setTimeout(startAutoplay, 2000), { passive: true });

                // Pause when tab is not visible
                document.addEventListener('visibilitychange', () => {
                    document.hidden ? stopAutoplay() : startAutoplay();
                });

                const mq = window.matchMedia('(prefers-reduced-motion: reduce)');
                if (!mq.matches && !document.hidden) startAutoplay();
                mq.addEventListener('change', e => e.matches ? stopAutoplay() : startAutoplay());
            }); });
        }

        function handleFeaturedClick(careerName) {
            // 0. Asegurar que todas las secciones estén renderizadas
            if (window._renderAllSections) window._renderAllSections();
            // 1. Limpiar buscador para asegurar que la carrera esté visible
            const searchInput = document.getElementById('search-input');
            if (searchInput.value) {
                searchInput.value = '';
                searchCareers(); // Resetea la lista
            }

            // 3. Actualizar el panel de información
            updateInfoPanel(careerName);

            // 4. Buscar el elemento específico en la lista
            // Escapar comillas por seguridad
            const safeName = careerName.replace(/"/g, '\\"');
            const listItem = document.querySelector(`.career-name-list[data-career-name="${safeName}"]`);

            if (listItem) {
                // Hacer scroll hasta el elemento específico (Centrado)
                setTimeout(() => {
                    listItem.scrollIntoView({ behavior: 'smooth', block: 'center' });

                    // Asegurar que también se marque como activo (estilo seleccionado)
                    // Quitar active y highlights de otros
                    document.querySelectorAll('.career-name-list').forEach(i => {
                        i.classList.remove('active', 'active-feature-highlight');
                    });

                    activeElement = listItem; // IMPORTANTE: Actualizar referencia global
                    listItem.classList.add('active');

                    // Efecto de "Flash" para destacar
                    void listItem.offsetWidth; // Trigger reflow
                    listItem.classList.add('active-feature-highlight');
                }, 100);
            }
        }

        // Carousel: slide 1x1 with JS interval + CSS transition
    </script>

    <div class="floating-actions">
        <button class="floating-btn btn-scroll-top" id="btn-scroll-top" title="Ir arriba" aria-label="Volver arriba">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24"
                stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7" />
            </svg>
        </button>

    </div>

    <script>
        // Consolidamos la lógica de carga al final
        // 10. Botones Flotantes (Ir Arriba y WhatsApp)
        const btnScrollTop = document.getElementById('btn-scroll-top');
        const btnWhatsapp = document.getElementById('btn-whatsapp');
        window.addEventListener('scroll', () => {
            if (window.pageYOffset > 300) {
                btnScrollTop.classList.add('visible');
            } else {
                btnScrollTop.classList.remove('visible');
            }
        });

        btnScrollTop.addEventListener('click', () => {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });

        btnWhatsapp.addEventListener('click', () => {
            const modalTitle = document.getElementById('modal-title');
            const careerName = modalTitle ? modalTitle.textContent : '';
            const isDefault = !careerName;

            let message = "Hola, me gustaría recibir más información sobre las carreras.";
            if (!isDefault) {
                message = `Hola, me interesa obtener más información sobre la carrera: ${careerName}`;
            }

            const encodedMessage = encodeURIComponent(message);
            btnWhatsapp.href = `https://wa.me/5491166522722?text=${encodedMessage}`;
        });

    </script>
    <!-- COMPARADOR ELIMINADO -->

    <!-- Modal para Información de Carreras -->
    <div id="career-modal" class="fixed inset-0 z-[5000] hidden items-center justify-center p-4" role="dialog" aria-modal="true" aria-labelledby="modal-title">
        <div class="modal-backdrop absolute inset-0 bg-[#011a14]/90 backdrop-blur-md" onclick="closeCareerModal()"></div>
        <div class="modal-panel relative bg-[#1c2f31] border-2 border-[#00c7b1] rounded-2xl w-full max-w-3xl max-h-[90vh] overflow-hidden flex flex-col shadow-[0_0_50px_rgba(0,199,177,0.3)]">
            <!-- Header -->
            <div class="p-5 sm:p-6 border-b border-[#00c7b1]/20 bg-[#051a1a]">
                <div class="flex justify-between items-start gap-3">
                    <h3 id="modal-title" class="text-xl sm:text-2xl font-black text-white uppercase tracking-tighter leading-tight"></h3>
                    <button onclick="closeCareerModal()" class="flex-shrink-0 w-10 h-10 flex items-center justify-center rounded-full bg-[#1c2f31] text-[#7ca19b] hover:text-white hover:bg-[#00c7b1]/20 transition-colors" aria-label="Cerrar">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                        </svg>
                    </button>
                </div>
                <!-- Metadata -->
                <div id="modal-meta" class="grid grid-cols-2 sm:grid-cols-4 gap-3 mt-4"></div>
            </div>
            <!-- Content -->
            <div class="p-5 sm:p-8 overflow-y-auto custom-scrollbar flex-1">
                <div id="modal-content" class="text-[#b4d3ce] text-base sm:text-lg leading-relaxed whitespace-pre-wrap">
                </div>
            </div>
            <!-- Footer -->
            <div class="p-4 bg-[#051a1a] border-t border-[#00c7b1]/20 flex justify-end gap-3">
                <button onclick="copyModalText()" class="px-5 py-2 border border-[#00c7b1] text-[#00c7b1] font-bold rounded-lg hover:bg-[#00c7b1]/10 transition-colors text-sm">Copiar texto</button>
                <button onclick="closeCareerModal()" class="px-6 py-2 bg-[#00c7b1] text-[#013729] font-bold rounded-lg hover:brightness-110 transition-colors text-sm">Cerrar</button>
            </div>
        </div>
    </div>

    <script>
        function openCareerModal(careerName, data, fullText) {
            const modal = document.getElementById('career-modal');
            const modalTitle = document.getElementById('modal-title');
            const modalMeta = document.getElementById('modal-meta');
            const modalContent = document.getElementById('modal-content');

            modalTitle.textContent = careerName;

            // Metadata badges
            const metaItems = [
                { label: 'Nivel', value: data.level },
                { label: 'Duración', value: data.duration },
                { label: 'Título', value: data.degree },
                { label: 'Foco', value: data.focus }
            ];
            modalMeta.innerHTML = metaItems.map(item => `
                <div class="bg-[#013729] rounded-lg px-3 py-2">
                    <span class="block text-[10px] font-bold uppercase tracking-widest text-[#00c7b1]">${item.label}</span>
                    <span class="block text-sm text-white font-semibold mt-0.5 leading-tight">${item.value}</span>
                </div>
            `).join('');

            // Full text content
            modalContent.textContent = fullText || data.description || 'Información no disponible aún para esta carrera.';

            modal.classList.remove('hidden', 'modal-closing');
            modal.classList.add('flex');
            modal.offsetHeight;
            modal.classList.add('modal-visible');
            document.body.classList.add('overflow-hidden');
        }

        function closeCareerModal() {
            const modal = document.getElementById('career-modal');
            modal.classList.remove('modal-visible');
            modal.classList.add('modal-closing');
            setTimeout(() => {
                modal.classList.add('hidden');
                modal.classList.remove('flex', 'modal-closing');
                document.body.classList.remove('overflow-hidden');
            }, 300);
        }

        function copyModalText() {
            const content = document.getElementById('modal-content').textContent;
            navigator.clipboard.writeText(content).then(() => {
                const btn = event.target;
                const original = btn.textContent;
                btn.textContent = 'Copiado!';
                btn.classList.add('bg-[#00c7b1]/20');
                setTimeout(() => {
                    btn.textContent = original;
                    btn.classList.remove('bg-[#00c7b1]/20');
                }, 1500);
            });
        }

        // Cerrar modal con Escape
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                const modal = document.getElementById('career-modal');
                if (!modal.classList.contains('hidden')) {
                    closeCareerModal();
                }
            }
        });
    </script>

    <!-- FOOTER -->
    <footer style="background: linear-gradient(180deg, rgba(1,55,41,0.6) 0%, #011d15 100%); border-top: 1px solid rgba(0, 255, 225, 0.08);">
        <div class="container mx-auto px-6 py-12">
            <div class="flex flex-col md:flex-row items-center md:items-start justify-between gap-8">
                <!-- Brand -->
                <div class="text-center md:text-left">
                    <p class="text-lg font-black text-white uppercase tracking-tighter">CAU Villa Lugano</p>
                    <p class="text-sm mt-1 font-normal" style="color: var(--color-text-light);">Universidad Siglo 21</p>
                </div>

                <!-- Social icons -->
                <div class="flex items-center gap-3 mr-24">
                    <a href="https://wa.me/5491166522722" target="_blank" rel="noopener" aria-label="WhatsApp"
                        class="footer-social-link">
                        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/></svg>
                    </a>
                    <a href="https://www.facebook.com/ceducativovillalugano/" target="_blank" rel="noopener" aria-label="Facebook"
                        class="footer-social-link">
                        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>
                    </a>
                    <a href="https://www.instagram.com/centroeducativovillalugano/" target="_blank" rel="noopener" aria-label="Instagram"
                        class="footer-social-link">
                        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zM12 0C8.741 0 8.333.014 7.053.072 2.695.272.273 2.69.073 7.052.014 8.333 0 8.741 0 12c0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98C8.333 23.986 8.741 24 12 24c3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98C15.668.014 15.259 0 12 0zm0 5.838a6.162 6.162 0 100 12.324 6.162 6.162 0 000-12.324zM12 16a4 4 0 110-8 4 4 0 010 8zm6.406-11.845a1.44 1.44 0 100 2.881 1.44 1.44 0 000-2.881z"/></svg>
                    </a>
                </div>
            </div>

            <div class="mt-8 pt-6" style="border-top: 1px solid rgba(0, 255, 225, 0.06);">
                <p class="text-center text-xs" style="color: var(--color-text-light);">
                    &copy; 2026 CAU Villa Lugano &mdash; Universidad Siglo 21. Todos los derechos reservados.
                </p>
            </div>
        </div>
    </footer>

</body>

</html>